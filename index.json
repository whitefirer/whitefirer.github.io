[{"categories":["Tech"],"content":"ç»†å¿ƒçš„æœ‹å‹å¯èƒ½å·²ç»å‘ç°æˆ‘åœ¨é¦–é¡µç»ˆç«¯ä¸ŠåŠ ä¸Šäº†Now you can use the Python directly in this console!è¿™å¥è¯ï¼Œæ˜¯çš„ï¼Œç°åœ¨pythonå‘½ä»¤å·²ç»åŠ å…¥äº†é¦–é¡µç»ˆç«¯ä¸­ï¼ç›®å‰å·²æ”¯æŒåŸºæœ¬åº“ï¼Œæœªæ¥çœ‹å®é™…å†™ä½œéœ€è¦æ˜¯å¦å¢åŠ å…¶å®ƒåº“çš„æ”¯æŒï¼Œå¯èƒ½ä¼šç”¨æ¥åšä¸€äº›åˆ†æå›¾å½¢å˜æ¢æ˜¾ç¤ºä»€ä¹ˆçš„ã€‚ ","date":"2023-04-07","objectID":"/posts/2023/04/07/how-to-run-python-in-the-web-terminal/:0:0","tags":["tech","xterm.js","python","pyodide","wasm"],"title":"å¦‚ä½•åœ¨é¡µé¢ä¸Šè·‘ä¸€ä¸ªPythonç»ˆç«¯ï¼Ÿ","uri":"/posts/2023/04/07/how-to-run-python-in-the-web-terminal/"},{"categories":["Tech"],"content":"èƒŒæ™¯ ä¹‹å‰æˆ‘åœ¨åšå®¢é‡Œåˆ†äº«è¿‡å¦‚ä½•ä½¿ç”¨asciinemaæ¥å½•åˆ¶ç»ˆç«¯æ“ä½œè¿‡ç¨‹å¹¶åœ¨é¡µé¢ä¸Šå¾ˆè½»é‡çº§åœ°æ¼”ç¤ºï¼Œä½†æ˜¯æœ‰äº›ä¾‹å­å…‰çœ‹æ¼”ç¤ºè¿˜ä¸å¤Ÿï¼Œå¯èƒ½è¿˜éœ€è¦å®æœºæ“ä½œï¼Œé‚£ä¹ˆå°±å›åˆ°äº†ä»Šå¤©çš„ä¸»é¢˜ï¼šå¦‚ä½•åœ¨é¡µé¢ä¸Šè·‘ä¸€ä¸ªpythonç»ˆç«¯ï¼ˆæˆ–è€…ä»»æ„è¯­è¨€çš„å®æ“ç¯å¢ƒï¼‰ï¼Ÿ ","date":"2023-04-07","objectID":"/posts/2023/04/07/how-to-run-python-in-the-web-terminal/:0:1","tags":["tech","xterm.js","python","pyodide","wasm"],"title":"å¦‚ä½•åœ¨é¡µé¢ä¸Šè·‘ä¸€ä¸ªPythonç»ˆç«¯ï¼Ÿ","uri":"/posts/2023/04/07/how-to-run-python-in-the-web-terminal/"},{"categories":["Tech"],"content":"æ–¹æ¡ˆ ç»è¿‡ä¸€æ®µæ—¶é—´æœé›†å’Œåˆ†æï¼Œå‘ç°æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š python.orgå®˜ç½‘çš„ç”¨çš„æ–¹å¼æ˜¯é€šè¿‡websocketå‘åœ¨çº¿æœåŠ¡pythonanywhereçš„è¿œç¨‹æœåŠ¡å™¨é€šè®¯å¾—åˆ°ç»“æœçš„ï¼› èœé¸Ÿæ•™ç¨‹ç½‘ç«™å’Œå»–é›ªå³°ç½‘ç«™é‡Œçš„pythonæ•™ç¨‹ä¹Ÿéƒ½æ˜¯é‡‡ç”¨çš„ç±»ä¼¼æ–¹æ³•ï¼Œåªä¸è¿‡æœ‰åŒºåˆ«çš„æ˜¯ç›´æ¥é€šè¿‡httpè¯·æ±‚å°†ä»£ç å‘é€åˆ°æœåŠ¡å™¨æ¥å®ç°çš„ï¼› katacodaè¢«è–…closedäº†å°±ä¸æäº†ï¼Œå…¶å®ä¹Ÿæ˜¯è¿œç¨‹æœåŠ¡ã€‚ å¦å¤–ï¼Œæ ¹æ®åŸæ¥åšè¿‡çš„é¡¹ç›®æ¥çœ‹ï¼Œxterm.jsä¹Ÿç¡®å®èƒ½é€šè¿‡websocketè¿æ¥åˆ°dockerå®¹å™¨ï¼› ä½†æˆ‘ä»¬æ³¨æ„åˆ°ä»–ä»¬éƒ½æœ‰ä¸ªé€šç—…ï¼Œå°±æ˜¯è¦ä¾èµ–è¿œç¨‹æœåŠ¡ï¼Œè¿™å¯¹äºâ€œé™æ€â€åšå®¢æ¥è®²å¯å¤ªä¸å‹å¥½äº†ï¼Œè€Œä¸”è¿˜è¦ä¿è¯æ²™ç›’çš„å®‰å…¨ã€‚ é‚£æœ‰æ²¡æœ‰ä¸ä¾èµ–è¿œç¨‹æœåŠ¡çš„æ–¹å¼å‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯ï¼šæœ‰ï¼ æ¯”è¾ƒå®¹æ˜“æƒ³åˆ°çš„ä¸€ç§æ–¹æ¡ˆæ˜¯åœ¨ç½‘é¡µä¸Šè°ƒç”¨èµ·æµè§ˆè€…æœ¬æœºçš„pythonï¼Œè¿™é‡Œå°±è¦ç”¨åˆ°å¾®è½¯å¼€æºçš„node-ptyäº†ï¼Œå…·ä½“å¯ä»¥å‚è€ƒå®ƒçš„ä¾‹å­æ¥å®ç°ã€‚ä½†æ˜¯è¿™æœ‰ä¸ªæ˜æ˜¾çš„ç¼ºç‚¹ï¼Œå°±æ˜¯è¦æµè§ˆè€…äº‹å…ˆå‡†å¤‡å¥½ç¯å¢ƒã€‚ é‚£æœ‰æ²¡æœ‰ä¸ä¾èµ–æµè§ˆè€…ç¯å¢ƒçš„æ–¹å¼å‘¢ï¼Ÿ ç­”æ¡ˆä¾ç„¶æ˜¯ï¼šæœ‰ï¼ ç›˜ç‚¹æœ€è¿‘å‡ çš„æŠ€æœ¯æ½®æµï¼Œæˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ°ä¸€é¡¹æŠ€æœ¯ï¼Œé‚£å°±æ˜¯webassembly(ç®€ç§°wasm)ï¼Œå®Œå…¨å¯ä»¥ç”¨wasmåœ¨é¡µé¢ä¸Šè·‘pythonä»£ç å˜›ï¼Œè¿˜è®°å¾—ä¹‹å‰å¤§ç«çš„åœ¨webé¡µé¢æ‰§è¡Œpythonä»£ç çš„é¡¹ç›®pyscriptå—ï¼Ÿå®ƒå°±æ˜¯åŸºäºwasmçš„æ¥å£é¡¹ç›®pyodideå®ç°çš„ã€‚ ä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼Œè°ƒç”¨pyodide.runPythonå°±è¡Œï¼š \u003c!DOCTYPE html\u003e \u003chtml\u003e \u003chead\u003e \u003cmeta charset=\"UTF-8\"\u003e \u003ctitle\u003ePyodide in xterm.js\u003c/title\u003e \u003clink rel=\"stylesheet\" href=\"https://unpkg.com/xterm/css/xterm.css\" /\u003e \u003cscript src=\"https://unpkg.com/xterm@5.1.0/lib/xterm.js\"\u003e\u003c/script\u003e \u003cscript src=\"https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.js\"\u003e\u003c/script\u003e \u003cstyle\u003e #terminal { display: flex; } \u003c/style\u003e \u003c/head\u003e \u003cbody\u003e \u003cdiv id=\"terminal\"\u003e\u003c/div\u003e \u003cscript\u003e const ENTER = '\\r'; const DEL = '\\u007F'; const VK_UP = '\\x1b[A'; const VK_DOWN = '\\x1b[B'; const VK_RIGHT = '\\x1b[C'; const VK_LEFT = '\\x1b[D'; var pyodide = null; var pythonCodeX = 0; var pythonCodeY = 0; var historyCodeList = []; var lastPythonCodeLine = \"\"; var renderingCode = false; var stdout_codes = []; function rawstdout(code) { stdout_codes.push(code); } var term = new Terminal(); term.open(document.getElementById('terminal')); async function startPyodide() { term.write('Starting Python...'); pyodide = await loadPyodide(); await pyodide.loadPackage(\"pygments\") pyodide.runPythonAsync(` import sys from pygments import highlight from pygments.lexers import PythonLexer from pygments.formatters import TerminalTrueColorFormatter sys.version + ' (https://whitefirer.org)' `).then(output =\u003e { term.write('\\rPython ' + output + '\\r\\n'); term.prompt(); }); pyodide.setStdout({ raw: rawstdout, isatty: true }); } term.prompt = () =\u003e { term.write('\\r\\x1b[01;32m\u003e\u003e\u003e '); }; var pythonCode = ''; var blockFlag = \"\"; var blockMap = { \":\": \"\\r\", \"\\\\\": \"\\r\", \"{\": \"}\", \"[\": \"]\", \"(\": \")\", } var historyIndex = 0; var historyCode = \"\"; var lastCRIndex = 0; function setCursorPosition(x, y) { term.write(`\\x1b[${y};${x}H`) } async function writeHightPythonCode(x, y, pythonCode) { // term.write(e); setCursorPosition(x, y); await pyodide.runPythonAsync(` _PY_code = \"\"\" ${pythonCode.replaceAll(\"\\\\\", \"\\\\\\\\\")} \"\"\" _PY_highlighted_code = highlight(_PY_code, PythonLexer(), TerminalTrueColorFormatter(style='native')); _PY_highlighted_code[:-1] `).then(output =\u003e { term.write(output.replaceAll('\\n', '\\r\\n... ')); }); } function earseCureentLinePythonCode() { if (pythonCodeY === (term.buffer._normal.cursorY + term.buffer._normal.baseY + 1)) { term.write('\\r\\x1b[2K\\x1b[01;32m\u003e\u003e\u003e '); } else if (term.buffer._normal.cursorX \u003e 4) { term.write('\\r\\x1b[2K... '); } else { term.write('\\r\\x1b[2K'); } } term.onData(e =\u003e { const printable = !e.altKey \u0026\u0026 !e.ctrlKey \u0026\u0026 !e.metaKey; switch (e) { case VK_LEFT: if (term.buffer._normal.cursorX \u003e 4) { setCursorPosition(term.buffer._normal.cursorX, term.buffer._normal.cursorY + 1); } break; case VK_RIGHT: lastCRIndex = pythonCode.lastIndexOf('\\r'); lastPythonCodeLine = pythonCode.substring(lastCRIndex + 1, pythonCode.length + 1); if (term.buffer._normal.cursorX \u003c (lastPythonCodeLine.length % term.cols + 4)) { setCursorPosition(term.buffer._normal.cursorX + 2, term.buffer._normal.cursorY + 1); } break; case VK_UP: if (historyCodeList.length === 0) { break; } if (pythonCode.length === 0) { pythonCodeX = term.buffer._normal.cursorX + 1; pythonCodeY = term.buffer._normal.cursorY + term.buffer._normal.baseY + 1; } historyCode = \"\"; historyIndex += 1; if (historyIndex \u003e (historyCodeList.length + 1)) { historyIndex = historyCodeList.length + 1; } else if (historyIndex != (historyCodeList.length + 1)) { historyCode = historyCodeList[historyCodeList.length - historyIndex] } earseCureentLinePythonCode(); lastCRIndex = pythonCode.lastIndexOf('\\r'); pythonC","date":"2023-04-07","objectID":"/posts/2023/04/07/how-to-run-python-in-the-web-terminal/:0:2","tags":["tech","xterm.js","python","pyodide","wasm"],"title":"å¦‚ä½•åœ¨é¡µé¢ä¸Šè·‘ä¸€ä¸ªPythonç»ˆç«¯ï¼Ÿ","uri":"/posts/2023/04/07/how-to-run-python-in-the-web-terminal/"},{"categories":["Tech"],"content":"æ•ˆæœ æ•ˆæœå¦‚ä¸‹ï¼Œè¯•è¯•åœ¨é‡Œé¢æ•²ä½ ç†Ÿæ‚‰çš„pythonä»£ç å§~ï¼š ","date":"2023-04-07","objectID":"/posts/2023/04/07/how-to-run-python-in-the-web-terminal/:0:3","tags":["tech","xterm.js","python","pyodide","wasm"],"title":"å¦‚ä½•åœ¨é¡µé¢ä¸Šè·‘ä¸€ä¸ªPythonç»ˆç«¯ï¼Ÿ","uri":"/posts/2023/04/07/how-to-run-python-in-the-web-terminal/"},{"categories":["Tech"],"content":"æ€»ç»“ ç›®å‰çœ‹è¿™ä¸ªåŸºäºwasmæŠ€æœ¯çš„æ–¹æ¡ˆä¾èµ–æ¯”è¾ƒå°‘ï¼Œä½†å…¶å®ƒæ–¹æ¡ˆä¹Ÿä¸æ˜¯ä¸€æ— æ˜¯å¤„ï¼Œä¸€äº›å¤æ‚ç¯å¢ƒç”¨è¿œç¨‹æ–¹æ¡ˆå¯èƒ½æ›´æœ‰ä¼˜åŠ¿ã€‚ä¸‹æ¬¡æˆ‘ä»¬å†ç»†è¯´wasmå’Œè¡ç”Ÿå‡ºæ¥çš„ä¸€äº›æŠ€æœ¯ã€‚ ","date":"2023-04-07","objectID":"/posts/2023/04/07/how-to-run-python-in-the-web-terminal/:0:4","tags":["tech","xterm.js","python","pyodide","wasm"],"title":"å¦‚ä½•åœ¨é¡µé¢ä¸Šè·‘ä¸€ä¸ªPythonç»ˆç«¯ï¼Ÿ","uri":"/posts/2023/04/07/how-to-run-python-in-the-web-terminal/"},{"categories":["Tech"],"content":"èƒŒæ™¯ å¦‚èåˆã€æ‰©å±•Service Meshæ–‡ä¸­æ‰€è¿°ï¼Œä¸ºäº†è®©ç¬¬ä¸‰æ–¹æœåŠ¡å‘ç°çš„æœåŠ¡èƒ½å¤Ÿæ¥å…¥åˆ°IstioæœåŠ¡ç½‘æ ¼å½“ä¸­ï¼Œæˆ‘è®¾è®¡å¼€æ”¾ä¸€ä¸ªåä¸ºPolaris2Istioçš„ç»„ä»¶ã€‚ ","date":"2022-08-30","objectID":"/posts/2022/08/30/polaris2istio/:0:1","tags":["tech","cloud native","service mesh","istio"],"title":"Polaris2Istioçš„å®ç°å’Œè¯´æ˜","uri":"/posts/2022/08/30/polaris2istio/"},{"categories":["Tech"],"content":"è®¾è®¡å›¾ ","date":"2022-08-30","objectID":"/posts/2022/08/30/polaris2istio/:0:2","tags":["tech","cloud native","service mesh","istio"],"title":"Polaris2Istioçš„å®ç°å’Œè¯´æ˜","uri":"/posts/2022/08/30/polaris2istio/"},{"categories":["Tech"],"content":"æ—¶åºå›¾ ","date":"2022-08-30","objectID":"/posts/2022/08/30/polaris2istio/:0:3","tags":["tech","cloud native","service mesh","istio"],"title":"Polaris2Istioçš„å®ç°å’Œè¯´æ˜","uri":"/posts/2022/08/30/polaris2istio/"},{"categories":["Tech"],"content":"ä½¿ç”¨æ–¹å¼ ç¼–è¯‘ make build è¿è¡Œ polaris2istio --polarisAddress \u003cpolarishost:port\u003e é…ç½® æ¨¡å¼ 1. åŸºäºServiceEntryçš„ç®¡ç†æ ‡ç­¾ç­›é€‰åŒæ­¥Polariså®ä¾‹: apiVersion: networking.istio.io/v1alpha3 kind: ServiceEntry metadata: name: \u003cpolaris-name-for-k8s\u003e namespace: polaris annotations: aeraki.net/polarisNamespace: Test aeraki.net/polarisService: test-service aeraki.net/external: \"false\" labels: manager: aeraki registry: polaris spec: hosts: - dev.\u003cpolaris-name-for-k8s\u003e.polaris resolution: NONE # or STATIC è¯¦ç»†è¯´æ˜è¯·å‚è€ƒï¼šhttps://github.com/aeraki-mesh/polaris2istio ","date":"2022-08-30","objectID":"/posts/2022/08/30/polaris2istio/:0:4","tags":["tech","cloud native","service mesh","istio"],"title":"Polaris2Istioçš„å®ç°å’Œè¯´æ˜","uri":"/posts/2022/08/30/polaris2istio/"},{"categories":["Tech"],"content":"å¿ƒå¾—æŠ€å·§ ä¿æŒåˆ†é…å¥½çš„VIP // polaris2istio/pkg/serviceregistry/polaris/watcher/provider.go func (w *ProviderWatcher) syncPolarisServices2Istio(polarisInfo *model.PolarisInfo) { klog.Infof(\"[syncPolarisServices2Istio] polarisInfo: %v\", polarisInfo) rsp, err := w.polarisclient.GetPolarisAllInstances(polarisInfo.PolarisNamespace, polarisInfo.PolarisService) if err != nil { klog.Errorf(\"[syncPolarisServices2Istio] query polaris services' instances failed, err: %v\", err.Error()) return } newServiceEntry, newAnnotations := model.ConvertServiceEntry(rsp, polarisInfo) if newServiceEntry == nil { klog.Errorf(\"convertServiceEntry failed?\") return } oldServiceEntry, err := w.ic.NetworkingV1alpha3().ServiceEntries(w.configRootNS).Get(context.TODO(), model.CovertServiceName(polarisInfo.PolarisNamespace, polarisInfo.PolarisService), v1.GetOptions{}) if err != nil { klog.Infof(\"[syncPolarisServices2Istio] get old service entries failed, error: %v\", err) return } newServiceEntry.Addresses = append(newServiceEntry.Addresses, oldServiceEntry.Spec.GetAddresses()...) if revision, exists := oldServiceEntry.GetAnnotations()[\"aeraki.net/revision\"]; !exists || newAnnotations[\"aeraki.net/revision\"] != revision { klog.Infof(\"[syncPolarisServices2Istio] update serviceentry: %v\", newServiceEntry) _, err = w.ic.NetworkingV1alpha3().ServiceEntries(oldServiceEntry.Namespace).Update(context.TODO(), w.toServiceEntryCRD(model.CovertServiceName(polarisInfo.PolarisNamespace, polarisInfo.PolarisService), newServiceEntry, oldServiceEntry, newAnnotations), v1.UpdateOptions{FieldManager: aerakiFieldManager}) if err != nil { klog.Errorf(\"failed to update ServiceEntry: %s\", err.Error()) } } else { log.Infof(\"[syncPolarisServices2Istio] serviceentry unchanged: %v\", oldServiceEntry.GetName()) } } ä»£ç  ","date":"2022-08-30","objectID":"/posts/2022/08/30/polaris2istio/:0:5","tags":["tech","cloud native","service mesh","istio"],"title":"Polaris2Istioçš„å®ç°å’Œè¯´æ˜","uri":"/posts/2022/08/30/polaris2istio/"},{"categories":["Tech"],"content":"æ³¨æ„äº‹é¡¹ åªå¯¹polariså‘½åç©ºé—´ä¸­çš„ServiceEntrysåŒæ­¥ï¼› åœ¨é›†ç¾¤ä¸­è¿è¡Œæ—¶éœ€è¦ä¸ºå…¶é…ç½®æƒé™ç­–ç•¥ï¼› å¼€æºç‰ˆæœ¬çš„polaris sdkæ˜¯éœ€è¦æ‰‹åŠ¨è®¾ç½®polarisåœ°å€çš„ï¼Œä¸å†…éƒ¨ç‰ˆä¸åŒï¼› ","date":"2022-08-30","objectID":"/posts/2022/08/30/polaris2istio/:0:6","tags":["tech","cloud native","service mesh","istio"],"title":"Polaris2Istioçš„å®ç°å’Œè¯´æ˜","uri":"/posts/2022/08/30/polaris2istio/"},{"categories":["Tech"],"content":" å¯¼è¯­ æ²¡æœ‰æœ€å®Œç¾çš„æ¶æ„ï¼Œåªæœ‰æœ€åˆé€‚çš„æ¶æ„ã€‚ ","date":"2022-08-29","objectID":"/posts/2022/08/29/extension-and-expansion-of-service-mesh/:0:0","tags":["tech","cloud native","service mesh"],"title":"èåˆã€æ‰©å±•Service Mesh","uri":"/posts/2022/08/29/extension-and-expansion-of-service-mesh/"},{"categories":["Tech"],"content":"èƒŒæ™¯ å¾ˆå¤šæ—¶å€™æœåŠ¡ç½‘æ ¼åœ¨ä¸šåŠ¡éš¾ä»¥è½åœ°ï¼Œå¾€å¾€æ˜¯å› ä¸ºæœ‰å†å²åŒ…è¢±æˆ–è€…ç‰¹æ®Šéœ€æ±‚ï¼Œåè€Œæ²¡æœ‰æ–°è®¾è®¡çš„é¡¹ç›®æ¥å…¥æœåŠ¡ç½‘æ ¼å®¹æ˜“ï¼Œè€ŒåŸå› å¤šæ˜¯ä»¥ä¸‹å‡ ç‚¹ï¼š éš¾ç‚¹ ç§æœ‰åè®®ï¼šè¿™é‡Œæ³›æŒ‡Istioå®˜æ–¹æœªæ”¯æŒçš„åè®®ï¼Œå¦‚æœä¸èƒ½è¯†åˆ«ç§æœ‰åè®®ï¼Œä¹Ÿå°±æ— æ³•å¯¹ç§æœ‰åè®®è¿›è¡Œæµé‡ç®¡ç†ï¼ˆå¦‚è·¯ç”±ç­‰ï¼‰ï¼› ä¸èƒ½å¾ˆå¥½åœ°å¹³æ»‘è¿‡æ¸¡æ‰åŸæœ‰çš„åŒ—ææ˜Ÿæˆ–è€…ConsulæœåŠ¡å‘ç°ï¼› ç¬¬ä¸‰æ–¹æœåŠ¡å‘ç°ï¼šæ¯”å¦‚åŒ—ææ˜ŸæœåŠ¡å‘ç°å¾—åˆ°çš„IPæ˜¯å®ä¾‹IPï¼Œæˆ‘ä»¬è¿™è¾¹è¦æƒ³åŠæ³•è®©æµé‡èµ°åˆ°ServiceIPä¸Šå»ï¼Œé€šè¿‡Virtual Service IPåŠ ç«¯å£æ¥ç¡®å®šæœåŠ¡å’Œåè®®ï¼Œæ‰èƒ½åˆ©ç”¨åˆ°è¾¹è½¦æ¥ç®¡ç†æµé‡å’Œè§£æè‡ªå®šä¹‰åè®®ï¼› ","date":"2022-08-29","objectID":"/posts/2022/08/29/extension-and-expansion-of-service-mesh/:0:1","tags":["tech","cloud native","service mesh"],"title":"èåˆã€æ‰©å±•Service Mesh","uri":"/posts/2022/08/29/extension-and-expansion-of-service-mesh/"},{"categories":["Tech"],"content":"è§£å†³æ–¹æ¡ˆ ç§æœ‰åè®® ç§æœ‰åè®®æœåŠ¡ç½‘æ ¼çš„è§£å†³æ–¹æ¡ˆå¤§æ¦‚æœ‰ä»¥ä¸‹ä¸¤ç§ åè®®è½¬æ¢ åè®®æ‰©å±• åè®®è½¬æ¢ åè®®è½¬æ¢é¡¾åæ€è®®å°±æ˜¯å°†åè®®è½¬æ¢æˆç½‘æ ¼å†…æ”¯æŒçš„æ–¹æ¡ˆã€‚ ä¸€ç§æ˜¯åœ¨clientå¤šå®ç°ä¸ªåè®®è½¬æ¢å±‚ï¼Œä½†å¼€å‘ä»¥åŠéƒ¨ç½²æ›´æ–°éº»çƒ¦ï¼Œä½†å¦‚gRPC-gatewayä¹Ÿæ˜¯ç§å®ç°æ–¹å¼ï¼Œåªä¸è¿‡gRPCåœ¨Istioæœ¬èº«å°±æ”¯æŒï¼› ä¸€ç§æ˜¯åœ¨è¾¹è½¦ã€adapteræˆ–è€…è¾¹ç¼˜ç½‘å…³æœåŠ¡å»åšè½¬æ¢ï¼Œä½†ä¸€æ ·æœ‰ä¸Šé¢çš„é—®é¢˜ï¼› ä¸”æœ‰å¯èƒ½ç›®å‰ç½‘æ ¼å†…çš„åè®®å¹¶ä¸åˆé€‚ä¸šåŠ¡åœºæ™¯ï¼Œæ¯”å¦‚æ€§èƒ½ä¸‹é™ç­‰é—®é¢˜ï¼› åè®®æ‰©å±• è¿™é‡Œçš„åè®®æ‰©å±•æ˜¯æŒ‡é€šè¿‡Service Meshæ¥æ‰©å±•æ”¯æŒç§æœ‰åè®®åŠä»»æ„çš„å°šæœªæ”¯æŒçš„åè®®ã€‚ è‡ªç ” è‡ªç ”è‚¯å®šæ˜¯èƒ½å®ç°çš„ï¼Œä½†å¯¹æŠ€æœ¯è¦æ±‚è¾ƒé«˜ï¼Œéœ€è¦è¦å¯¹æ•°æ®é¢ä¿®æ”¹çš„æŠ€æœ¯èƒ½åŠ›ï¼ŒåƒEnvoyæ˜¯ç”¨C++å®ç°çš„ï¼Œå¦å¤–æ§åˆ¶é¢ä¹Ÿè¦åšä¸€å®šä¿®æ”¹ã€‚ Aeraki Aeraki Meshå¯ä»¥å¸®åŠ©ä½ åœ¨æœåŠ¡ç½‘æ ¼ä¸­ç®¡ç†ä»»ä½•ä¸ƒå±‚åè®®ã€‚ç›®å‰å·²ç»æ”¯æŒäº† Dubboã€Thritã€Redisã€Kafkaã€ZooKeeper ç­‰å¼€æºåè®®ã€‚ä½ è¿˜å¯ä»¥ä½¿ç”¨ Aeraki Mesh æä¾›çš„ MetaProtocol åè®®æ‰©å±•æ¡†æ¶æ¥ç®¡ç†ç§æœ‰åè®®çš„ä¸ƒå±‚æµé‡ã€‚ /** * Codec for Awesomerpc protocol. */ class AwesomerpcCodec : public MetaProtocolProxy::Codec, public Logger::Loggable\u003cLogger::Id::misc\u003e { public: AwesomerpcCodec() {}; ~AwesomerpcCodec() override = default; //åè®®è§£ç ï¼Œéœ€è¦è§£æ buffer å¹¶å¡«å…… Metadataï¼Œ Metadata å°†è¢«ç”¨äº MetaProtocol Proxy çš„ filterï¼Œä¾‹å¦‚é™æµï¼Œè·¯ç”±çš„åŒ¹é…æ¡ä»¶ MetaProtocolProxy::DecodeStatus decode(Buffer::Instance\u0026 buffer, MetaProtocolProxy::Metadata\u0026 metadata) override; //åè®®ç¼–ç ï¼Œå¯ä»¥æ ¹æ® Mutation å¯¹è¯·æ±‚æˆ–è€…å“åº”æ•°æ®åŒ…è¿›è¡Œä¿®æ”¹ï¼Œä¾‹å¦‚å¢åŠ ã€åˆ é™¤æˆ–è€…ä¿®æ”¹ headerï¼Œä¿®æ”¹åéœ€è¦å›å†™åˆ° buffer ä¸­ void encode(const MetaProtocolProxy::Metadata\u0026 metadata, const MetaProtocolProxy::Mutation\u0026 mutation, Buffer::Instance\u0026 buffer) override; //é”™è¯¯ç¼–ç ï¼Œç”¨äºæ¡†æ¶å‘å®¢æˆ·ç«¯è¿”å›é”™è¯¯ä¿¡æ¯ï¼Œä¾‹å¦‚æœªæ‰¾åˆ°è·¯ç”±æˆ–è€…è¿æ¥åˆ›å»ºå¤±è´¥ç­‰ï¼Œç¼–ç çš„æ•°æ®éœ€è¦å†™å…¥åˆ° buffer ä¸­ void onError(const MetaProtocolProxy::Metadata\u0026 metadata, const MetaProtocolProxy::Error\u0026 error, Buffer::Instance\u0026 buffer) override; ... å®ç°ç¼–è§£ç æ¥å£è¾ƒç®€å•ï¼Œä»…éœ€å®ç° decodeï¼Œencode å’Œ onError ä¸‰ä¸ªæ–¹æ³•å³å¯ã€‚ è€Œå…¶å®ƒæœåŠ¡æ²»ç†èƒ½åŠ›éƒ½å·²ç»é€šè¿‡MetaPortocolè¿™ä¸ªEnvoyFilterï¼Œä»¥æ’ä»¶çš„å½¢å¼ç»Ÿä¸€å®ç°äº†æ”¯æŒã€‚ è€Œåœ¨Istioä¸­å£°æ˜ä½¿ç”¨å®ƒä¹Ÿè¾ƒç®€å•ï¼Œä»…éœ€åˆ›å»ºä¸€ä¸ª Aeraki çš„ ApplicationProtocol CRDèµ„æºï¼š apiVersion: metaprotocol.aeraki.io/v1alpha1 kind: ApplicationProtocol metadata: name: my-protocol namespace: istio-system spec: protocol: my-protocol codec: aeraki.meta_protocol.codec.my_protocol ç¬¬ä¸‰æ–¹æœåŠ¡å‘ç° å‡ ç§èåˆç½‘æ ¼æœåŠ¡å‘ç°åå­—çš„æ–¹æ¡ˆå¯¹æ¯”ï¼š æ–¹æ¡ˆå ä¼˜ç‚¹ ç¼ºç‚¹ åŸºäºæœåŠ¡å‘ç°ä»£ç† å®Œå…¨ä¸éœ€è¦ä¿®æ”¹ä¸šåŠ¡ä»£ç  éœ€è¦å¼€å‘ä»£ç†æœåŠ¡ åŸºäºè¾¹è½¦ æ›´ç¬¦åˆåé¢ç½‘æ ¼å»ºè®¾çš„è§„èŒƒ èƒ½å¤„ç†è‡ªå®šä¹‰åè®® éœ€è¦ä¿®æ”¹ä¸šåŠ¡è¯·æ±‚Client åœ¨è¾¹è½¦ä¸­è¿›è¡ŒæœåŠ¡å‘ç°è¾ƒé‡ åŸºäºé…ç½® åŸç†è¾ƒä¸ºç®€å• éœ€è¦ä¿®æ”¹ä¸šåŠ¡è¯·æ±‚Client ä¸å¤Ÿçµæ´»ï¼Œä¸å¤Ÿé€šç”¨ åŸºäºDNS åŸç†è¾ƒä¸ºç®€å•ï¼Œæ˜“ç»´æŠ¤ éœ€è¦ä¿®æ”¹ä¸šåŠ¡è¯·æ±‚Client DNS+è¾¹è½¦ åŸç†è¾ƒä¸ºç®€å•ï¼Œæ˜“ç»´æŠ¤ èƒ½å¤„ç†è‡ªå®šä¹‰åè®® éœ€è¦ä¿®æ”¹ä¸šåŠ¡è¯·æ±‚Client æœåŠ¡å‘ç°æ”¹æˆék8s service å¯ä»¥ç…§é¡¾åŸæœ‰VMä¸Šçš„æœåŠ¡ éœ€è¦è‡ªç ”æ§åˆ¶é¢ï¼Œæ•°æ®é¢ä¹Ÿè¦è¿›è¡Œä¸€äº›ä¿®æ”¹ æˆ‘ä¸ªäººæ¯”è¾ƒå–œæ¬¢çš„æ˜¯ä»£ç†ã€DNSå’Œç”¨Consulæ›¿ä»£çš„è¿™ä¸‰ç§æ–¹æ¡ˆï¼Œå…¶ä¸­æœ€ç¬¦åˆistioåŸæœ‰æµç¨‹æ˜¯DNSè¿™ç§ï¼Œæ–¹æ¡ˆè¿‡å¤šï¼Œå°±ä¸ä¸€ä¸€è¯¦ç»†è¯´æ˜äº†ï¼Œè¿™é‡Œä¸»è¦æDNSæ¨¡å¼ä¸‹ï¼Œé€šè¿‡X2Istioæ³¨å†ŒServiceEntryçš„æ–¹å¼ã€‚ X2Istio (Polaris2Istio) Istioå¯ç”¨ç‰¹æ€§ ServiceEntryè‡ªåŠ¨åˆ†é…VIPï¼› Service ExternalNameæä¾›DNS CNAMEè®°å½•ï¼› åˆ©ç”¨ä¸Šè¿°ç‰¹æ€§å¯åˆ¶å®šä»¥ä¸‹æ–¹æ¡ˆï¼š è¯´æ˜ èµ°æ–¹å¼4è°ƒç”¨å°†ä¸ŠæŠ¥ç»™Polarisç»„ä»¶ä»¥ä¾›ä»–è‡ªåŠ¨å»ºç«‹æ–°çš„ServiceEntryï¼Œè¿™æ ·å°±å›åˆ°äº†æ–¹å¼3ï¼Œåé¢å°±ä¸ç”¨å†è¿›è¡ŒL5å‘ç°è€Œæ˜¯ç›´æ¥DNSè§£æèµ°ServiceIPäº†ï¼› èµ°æ–¹å¼3è°ƒç”¨çš„æœåŠ¡å¦‚æœåé¢è¿ç§»åˆ°äº†é›†ç¾¤å†…ï¼Œé‚£ä¹ˆå°†externalNameæ”¹æˆé›†ç¾¤å†…çš„Serviceï¼Œåé¢å˜æˆæ–¹å¼2ï¼Œè¿™æ ·å°±å¯ä»¥å…·å¤‡å®Œæ•´çš„ç½‘æ ¼èƒ½åŠ›ï¼› å½“ä¸»è°ƒéƒ½æ”¹æˆç›´æ¥ä½¿ç”¨ServiceNameæ—¶ï¼Œå°†éƒ½èµ°æ–¹å¼1ï¼Œæœ‰å…¶å®ƒå‡ ç§è°ƒç”¨æ–¹å¼çš„å­˜åœ¨ï¼Œå°†å¤§å¤§é™ä½ä¸šåŠ¡æ”¹é€ çš„å·¥ä½œé‡ã€‚ å›¾ä¸­çš„Polaris2Istioå°±ç›¸å½“äºæœ¬å›¾ä¸­çš„X2Istioã€‚ Polaris2Istio:Â https://github.com/aeraki-mesh/polaris2istio ServiceEntryè‡ªåŠ¨åˆ†é…IPå¹¶è§£æ DNS ä»£ç†è¿˜æ”¯æŒä¸ºæ²¡æœ‰æ˜ç¡®å®šä¹‰çš„Â ServiceEntryÂ è‡ªåŠ¨åˆ†é…åœ°å€ã€‚è¿™æ˜¯é€šè¿‡Â ISTIO_META_DNS_AUTO_ALLOCATEÂ é€‰é¡¹é…ç½®çš„ã€‚ å¯ç”¨æ­¤ç‰¹æ€§åï¼ŒDNS å“åº”å°†ä¸ºæ¯ä¸ªÂ ServiceEntryÂ è‡ªåŠ¨åˆ†é…ä¸€ä¸ªä¸åŒçš„ç‹¬ç«‹åœ°å€ã€‚ç„¶åä»£ç†èƒ½åŒ¹é…è¯·æ±‚ä¸ IP åœ°å€ï¼Œå¹¶å°†è¯·æ±‚è½¬å‘åˆ°ç›¸åº”çš„Â ServiceEntryã€‚ å‚è€ƒï¼šhttps://istio.io/latest/zh/docs/ops/configuration/traffic-management/dns-proxy/ DNSè§£æ DNSæ˜¯k8så†…éƒ¨å°±åœ¨ä½¿ç”¨çš„åå­—è§£ææœåŠ¡ï¼ˆç›®å‰é›†ç¾¤ä¸­ä½¿ç”¨çš„æ˜¯CoreDNSï¼‰ï¼Œæˆ‘ä»¬åªè¦è§£å†³åå­—è½¬ä¹‰åçš„åŸŸåèƒ½å¤Ÿä¸€æ ·è§£æåˆ°ServiceIPå°±èƒ½è§£å†³æœåŠ¡å‘ç°çš„é—®é¢˜ï¼Œè¿™é‡Œå¯ä»¥åˆ©ç”¨Serviceæœ¬èº«å°±æœ‰EnternalNameæ¥CNAMEè§£æè§£å†³ã€‚ å‚è€ƒï¼šhttps://github.com/kubernetes/kubernetes/issues/39792 externalname å‚è€ƒï¼šhttps://kubernetes.io/docs/concepts/services-networking/service/#externalname ServiceEntry å¯æŒ‰å¦‚ä¸‹é…ç½®ï¼š apiVersion: networking.istio.io/v1alpha3 kind: ServiceEntry metadata: name: \u003cpolaris-name-for-k8s\u003e namespace: polaris annotations: aeraki.net/polarisNamespace: Test aeraki.net/polarisService: test-service aeraki.net/external: \"false\" labels: manager: aeraki registry: polaris spec: hosts: - dev.\u003cpolaris-name-for-k8s\u003e.polaris resolution: NONE # or STATIC å‚è€ƒï¼š https://github.com/aeraki-mesh/polaris2istio è¯·æ³¨æ„æˆ‘ä»¬é›†ç¾¤å½“ä¸­ä½¿ç”¨çš„æ˜¯CoreDNSï¼Œå®ƒè¦æ±‚externalNameçš„æ ¼å¼å¿…é¡»æ˜¯ç¬¦åˆFQDNçš„ï¼Œå³æœ€å…¨çš„å½¢å¼ã€‚ å¯¹äºå·²ç»åœ¨é›†ç¾¤å½“ä¸­çš„Serviceï¼Œåªéœ€è¦åˆ›å»ºæœ‰åŸæœåŠ¡å‘ç°åå­—å’Œserviceæ˜ å°„å…³ç³»çš„externalNameç±»å‹çš„Serviceå°±è¡Œï¼› å¯¹äºä¸åœ¨é›†ç¾¤å½“ä¸­çš„L5æœåŠ¡ï¼Œåˆ™éœ€è¦å…ˆåˆ›å»ºServiceEntryæŒ‰å…¥ç½‘æ ¼ï¼Œå¹¶é€šè¿‡Polaris2Istioæ¥ç»´æŠ¤å®ä¾‹å˜æ›´ï¼› ç”±äºå„é¡¹ç›®ä¸ä¸€æ ·ï¼Œæºç ä¸­æ²¡æœ‰æ ¹æ®ç®¡ç†çš„Serviceæ¥åŒ¹é…ï¼Œè€Œæ˜¯ç›´æ¥åˆ›å»ºç›¸åº”çš„ServiceEntryå³å¯ã€‚ å…³äºPolarisçš„å…·ä½“å®ç°ï¼Œä¸‹ç¯‡æ–‡ç« å†è®²ã€‚ ","date":"2022-08-29","objectID":"/posts/2022/08/29/extension-and-expansion-of-service-mesh/:0:2","tags":["tech","cloud native","service mesh"],"title":"èåˆã€æ‰©å±•Service Mesh","uri":"/posts/2022/08/29/extension-and-expansion-of-service-mesh/"},{"categories":["Tech"],"content":"æ€»ç»“ ç°å®æƒ…å†µä¸æ€»æ˜¯ç†æƒ³æ¨¡å‹ï¼Œæˆ‘ä»¬è¦æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œè°ƒæ•´ï¼Œæ²¡æœ‰æœ€å®Œç¾çš„æ¶æ„ï¼Œåªæœ‰æœ€åˆé€‚çš„æ¶æ„ã€‚ ","date":"2022-08-29","objectID":"/posts/2022/08/29/extension-and-expansion-of-service-mesh/:0:3","tags":["tech","cloud native","service mesh"],"title":"èåˆã€æ‰©å±•Service Mesh","uri":"/posts/2022/08/29/extension-and-expansion-of-service-mesh/"},{"categories":["Tech","Workspace"],"content":"å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨","date":"2022-08-29","objectID":"/posts/2022/08/29/efficient-command-line-tools/","tags":["tech","command-line-tools"],"title":"é«˜æ•ˆç»ˆç«¯å‘½ä»¤è¡Œå·¥å…·","uri":"/posts/2022/08/29/efficient-command-line-tools/"},{"categories":["Tech","Workspace"],"content":" å¯¼è¯­ å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚ ä½œä¸ºæŠ€æœ¯äººå‘˜ï¼Œä¸€ä¸ªé«˜æ•ˆçš„å·¥ä½œç¯å¢ƒå°¤ä¸ºé‡è¦ã€‚ä¸‹é¢åˆ†äº«ä¸‹æˆ‘çš„ç»ˆç«¯å‘½ä»¤è¡Œä¸‹çš„ç¯å¢ƒå’Œå·¥å…·é…ç½®ã€‚ zsh\u0026oh-my-zsh å®‰è£… å‚è€ƒï¼šhttps://ohmyz.sh/ æ’ä»¶ è¯­æ³•é«˜äº®ï¼ˆzsh-syntax-highlightingï¼‰ git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting è‡ªåŠ¨è¡¥å…¨ï¼ˆzsh-autosuggestionsï¼‰ git clone https://github.com/zsh-users/zsh-autosuggestions.git $ZSH_CUSTOM/plugins/zsh-autosuggestions æœ€åè®°å¾—å°†å®ƒä»¬åŠ åˆ°.zshrcé‡Œã€‚ é›†ç¾¤ç¯å¢ƒæ˜¾ç¤ºï¼ˆzsh-kubectl-prompt) å¯å‚è€ƒhttps://github.com/whitefirer/workspace/blob/main/.zshrcè¿›è¡Œé…ç½®ï¼š # .zshrc function right_prompt() { local color=\"blue\" if [[ \"$ZSH_KUBECTL_NAMESPACE\" =~ \"system\" ]]; then color=\"yellow\" fi if [[ \"$ZSH_KUBECTL_CONTEXT\" =~ \"desktop\" || \"$ZSH_KUBECTL_CONTEXT\" =~ \"dev\" ]]; then color=\"green\" fi if [[ \"$ZSH_KUBECTL_CONTEXT\" =~ \"prod\" ]]; then color=\"red\" fi echo \"%{$terminfo[bold]$fg[$color]%}\\u2638($ZSH_KUBECTL_PROMPT)%{$reset_color%}\" } RPROMPT='$(right_prompt)' æˆåŠŸåä¼šæ˜¾ç¤ºå¦‚ä¸‹ï¼š å…¶ä¸­cni-testä¸ºè‡ªå·±åœ¨kubeconfigä¸­ç»™contextå–çš„åå­—ï¼Œå¯è‡ªè¡Œä¿®æ”¹ã€‚ é‡Œé¢çš„ctxå’Œnså‡ä¸ºkrewæ’ä»¶ã€‚ kubectlå¤‡å¿˜å½• kubectlå®‰è£…\u0026æ“ä½œ å…¶å®ƒå¯å‚è€ƒï¼šhttps://kubernetes.io/docs/tasks/tools/#install-kubectl æ›´å¤šç›¸å…³å¤‡å¿˜ï¼šhttps://kubernetes.io/zh/docs/reference/kubectl/cheatsheet/ kubectlæ’ä»¶ï¼ˆkrewï¼‰ å‚è€ƒï¼šhttps://krew.sigs.k8s.io/ kubectlé«˜äº®ï¼ˆkubecolorï¼‰ å¯ä»¥å‚è€ƒhttps://github.com/hidetatz/kubecolorÂ readmeé‡Œçš„åšæ³•ï¼Œaliasæˆkæˆ–è€…kubectlã€‚ å…¶å®ƒ ç»ˆç«¯å¤ç”¨ï¼ˆtmuxï¼‰ GitHubï¼šhttps://github.com/tmux/tmux å‚è€ƒï¼šhttps://www.ruanyifeng.com/blog/2019/10/tmux.html é«˜çº§catï¼ˆbat) å‚è€ƒï¼šhttps://github.com/sharkdp/bat/blob/master/doc/README-zh.md é«˜çº§æ¨¡ç³ŠæŸ¥æ‰¾ï¼ˆfzfï¼‰ å‚è€ƒï¼šhttps://github.com/junegunn/fzf#preview-window å³ä¾§çš„é¢„è§ˆæ˜¯ç»“åˆäº†å‰é¢çš„batå‘½ä»¤ã€‚ é«˜çº§lsï¼ˆexaï¼‰ å®‰è£… å‚è€ƒï¼šhttps://github.com/ogham/exa é«˜çº§topï¼ˆhtopï¼‰ å®‰è£… brew install htop jsoné«˜äº®ï¼ˆjqï¼‰ brew install jq jsoné«˜äº®åŠæŠ˜å ï¼ˆfxï¼‰ å®‰è£… brew install fx å®˜ç½‘ https://github.com/antonmedv/fx yamlé«˜äº®ï¼ˆyhï¼‰ å½“ç„¶æœ‰ä½¿ç”¨kubecolorçš„è¯ï¼Œkubectlä¹Ÿç”¨ä¸ä¸Šyhï¼Œä½†æ˜¯å…¶å®ƒå‘½ä»¤åœºæ™¯è¿˜æ˜¯å¯ä»¥ç”¨çš„ã€‚ å®‰è£… brew install yh ","date":"2022-08-29","objectID":"/posts/2022/08/29/efficient-command-line-tools/:0:0","tags":["tech","command-line-tools"],"title":"é«˜æ•ˆç»ˆç«¯å‘½ä»¤è¡Œå·¥å…·","uri":"/posts/2022/08/29/efficient-command-line-tools/"},{"categories":["Hugo"],"content":"Asciinema-Playeræ˜¯ä¸€æ¬¾è‘—åçš„çš„ç»ˆç«¯å½•åˆ¶æ’­æ”¾å™¨ï¼Œå¯ç”¨äºæ’­æ”¾asciinemaå½•åˆ¶çš„æ’­æ”¾æ–‡ä»¶ï¼Œç»å¸¸è¢«ç”¨æ¥è¿›è¡Œç»ˆç«¯æ“ä½œæ¼”ç¤ºã€‚è¿™é‡Œä¹Ÿå°†å…¶å¼•å…¥åˆ°äº†å½“å‰Hugoåšå®¢ä¸­ä½¿ç”¨ï¼Œä¸‹é¢æˆ‘å°†è®²è®²å¼•å…¥çš„è¿‡ç¨‹ã€‚ ","date":"2022-08-28","objectID":"/posts/2022/08/28/hugo-asciinema-player/:0:0","tags":["hugo","tech","asciinema"],"title":"å¦‚ä½•åœ¨Hugoåšå®¢ä¸­ä½¿ç”¨ç»ˆç«¯æ’­æ”¾å™¨Asciinema-Player","uri":"/posts/2022/08/28/hugo-asciinema-player/"},{"categories":["Hugo"],"content":"1.æ•ˆæœå±•ç¤º Talk is cheap, show the result ~ è¿™é‡Œç›´æ¥å€Ÿç”¨å®˜æ–¹demoè¿›è¡Œå±•ç¤ºã€‚ ","date":"2022-08-28","objectID":"/posts/2022/08/28/hugo-asciinema-player/:0:1","tags":["hugo","tech","asciinema"],"title":"å¦‚ä½•åœ¨Hugoåšå®¢ä¸­ä½¿ç”¨ç»ˆç«¯æ’­æ”¾å™¨Asciinema-Player","uri":"/posts/2022/08/28/hugo-asciinema-player/"},{"categories":["Hugo"],"content":"2.éœ€æ±‚åˆ†æ ä¸ºä»€ä¹ˆéœ€è¦åœ¨Hugoé‡Œé¢ä½¿ç”¨ç»ˆç«¯æ’­æ”¾å™¨Asciinema-Playerå‘¢ï¼Ÿ ä½œä¸ºæŠ€æœ¯äººå‘˜ï¼Œåœ¨å†™åšå®¢æ—¶æ€»æ˜¯éœ€è¦è¿›è¡Œä¸€äº›ç»ˆç«¯æ“ä½œæ¼”ç¤ºï¼Œè€Œæ¼”ç¤ºæ–¹å¼æ— éä»¥ä¸‹å‡ ç§ï¼š æ–¹å¼ ä¼˜ç‚¹ ç¼ºç‚¹ è§†é¢‘ èƒ½é…éŸ³é…ç‰¹æ•ˆ ç½‘ç«™æµé‡æ¶ˆè€—å¤§ï¼Œä¸èƒ½å¤åˆ¶æ–‡æœ¬ åŠ¨å›¾ æ–‡ä»¶ç›¸å¯¹å°äº› ä¸èƒ½æ§åˆ¶è¿›åº¦ï¼Œä¸èƒ½å¤åˆ¶æ–‡æœ¬ ä»£ç  å ç”¨æµé‡å°ï¼Œèƒ½å¤åˆ¶ ä¸èƒ½æ§åˆ¶è¿›åº¦ï¼Œä¹Ÿä¸å¤ªå¥½å±•ç¤ºæ•ˆæœ è€Œç»ˆç«¯å½•åˆ¶æ’­æ”¾å™¨Asciinema-Playeråˆ™å…¼å®¹ä½“ç§¯å°ã€èƒ½æ§åˆ¶ã€èƒ½å¤åˆ¶äºä¸€ä½“å¹¶èƒ½å®Œç¾å¤ç°ç»ˆç«¯æ“ä½œåœºæ™¯ï¼Œéå¸¸é€‚åˆç”¨äºåœ¨åšå®¢ä¸­è¿›è¡Œä¸€äº›ç»ˆç«¯æ“ä½œæ¼”ç¤ºã€‚ ","date":"2022-08-28","objectID":"/posts/2022/08/28/hugo-asciinema-player/:0:2","tags":["hugo","tech","asciinema"],"title":"å¦‚ä½•åœ¨Hugoåšå®¢ä¸­ä½¿ç”¨ç»ˆç«¯æ’­æ”¾å™¨Asciinema-Player","uri":"/posts/2022/08/28/hugo-asciinema-player/"},{"categories":["Hugo"],"content":"3.è§£å†³æ–¹æ¡ˆ é¦–å…ˆï¼Œåœ¨ç½‘ä¸Šæ‰¾ä¸‹å‰äººåœ¨Hugoåšå®¢é‡Œæ‰©å±•åµŒå…¥asciinema-playerçš„æ–¹æ³•ï¼Œæ¯”å¦‚ Embedding asciinema cast in your Hugo siteã€‚ shortcode å¯ä»¥æ‰¾åˆ°é‡Œé¢asciinema-playerçš„shortcodeä»£ç å¦‚ä¸‹ï¼š \u003cp\u003e \u003casciinema-player src=\"/casts/{{ with .Get \"key\" }}{{ . }}{{ end }}.cast\" cols=\"{{ if .Get \"cols\" }}{{ .Get \"cols\" }}{{ else }}640{{ end }}\" rows=\"{{ if .Get \"rows\" }}{{ .Get \"rows\" }}{{ else }}10{{ end }}\" {{ if .Get \"autoplay\" }}autoplay=\"{{ .Get \"autoplay\" }}\"{{ end }} {{ if .Get \"preload\" }}preload=\"{{ .Get \"preload\" }}\"{{ end }} {{ if .Get \"loop\" }}loop=\"{{ .Get \"loop\" }}\"{{ end }} start-at=\"{{ if .Get \"start-at\" }}{{ .Get \"start-at\" }}{{ else }}0{{ end }}\" speed=\"{{ if .Get \"speed\" }}{{ .Get \"speed\" }}{{ else }}1{{ end }}\" {{ if .Get \"idle-time-limit\" }}idle-time-limit=\"{{ .Get \"idle-time-limit\" }}\"{{ end }} {{ if .Get \"poster\" }}poster=\"{{ .Get \"poster\" }}\"{{ end }} {{ if .Get \"font-size\" }}font-size=\"{{ .Get \"font-size\" }}\"{{ end }} {{ if .Get \"theme\" }}theme=\"{{ .Get \"theme\" }}\"{{ end }} {{ if .Get \"title\" }}title=\"{{ .Get \"title\" }}\"{{ end }} {{ if .Get \"author\" }}author=\"{{ .Get \"author\" }}\"{{ end }} {{ if .Get \"author-url\" }}author-url=\"{{ .Get \"author-url\" }}\"{{ end }} {{ if .Get \"author-img-url\" }}author-img-url=\"{{ .Get \"author-img-url\" }}\"{{ end }} \u003e\u003c/asciinema-player\u003e \u003c/p\u003e ç»†ç»†å£å‘³äº†ä¸‹è¿™æ®µä»£ç ï¼Œç»“åˆè‡ªå·±éœ€æ±‚è¿›è¡Œäº†ä¿®æ”¹ï¼š Talk is cheap, show me the code ~ # themes/iLoveIt/layouts/shortcodes/asciinema.html \u003cp\u003e \u003casciinema-player {{- with .Get \"src\" }} src=\"{{ . }}\" {{ end -}} {{- with .Get \"key\" }} src=\"/casts/{{ . }}.cast\"{{ end -}} cols=\"{{ if .Get \"cols\" }}{{ .Get \"cols\" }}{{ else }}640{{ end }}\" rows=\"{{ if .Get \"rows\" }}{{ .Get \"rows\" }}{{ else }}10{{ end }}\" {{- with .Get \"autoplay\" }}autoplay=\"{{ . }}\"{{ end -}} {{- with .Get \"preload\" }}preload=\"{{ . }}\"{{ end -}} {{- with .Get \"loop\" }}loop=\"{{ . }}\"{{ end -}} start-at=\"{{ if .Get \"start-at\" }}{{ .Get \"start-at\" }}{{ else }}0{{ end }}\" speed=\"{{ if .Get \"speed\" }}{{ .Get \"speed\" }}{{ else }}1{{ end }}\" {{- with .Get \"idle-time-limit\" }}idle-time-limit=\"{{ . }}\"{{ end -}} {{- with .Get \"poster\" }} poster=\"{{ . | safeURL }}\"{{ end -}} {{- with .Get \"font-size\" }}font-size=\"{{ . }}\"{{ end -}} {{- with .Get \"theme\" }}theme=\"{{ . }}\"{{ end -}} {{- with .Get \"title\" }}title=\"{{ . }}\"{{ end -}} {{- with .Get \"author\" }}author=\"{{ . }}\"{{ end -}} {{- with .Get \"author-url\" }}author-url=\"{{ . }}\"{{ end }} {{- with .Get \"author-img-url\" }}author-img-url=\"{{ . }}\"{{ end -}} fit=\"{{ if .Get \"fit\" }}{{ .Get \"fit\" }}{{ else }}width{{ end }}\" \u003e\u003c/asciinema-player\u003e {{- .Page.Scratch.SetInMap \"this\" \"asciinema\" true -}} \u003c/p\u003e æ³¨æ„çœ‹é«˜äº®éƒ¨åˆ†ï¼Œä¸»è¦ä¿®æ”¹äº†ä»¥ä¸‹å‡ ç‚¹ï¼š ä¿®æ”¹ç‚¹ if .Get å½¢å¼ä»£ç è¿‡äºç´¯èµ˜ï¼Œè¿™é‡ŒæŠŠä¸éœ€è¦å–é»˜è®¤å€¼çš„è¯­å¥ç»Ÿç»Ÿæ”¹æˆäº†with .Getå½¢å¼ï¼› åªæœ‰å›ºå®šçš„keyæ–¹æ³•ä»æœ¬ç«™è·å–.castå½•åˆ¶æ–‡ä»¶ï¼Œè¿™é‡Œæ‰©å±•äº†srcä»¥ä¾¿ä»ç«™å¤–è·å–å½•åˆ¶æ–‡ä»¶åœ°å€ï¼› posterè¿™é‡Œä¼šå¾—åˆ°ä¸€ä¸ªå¥‡æ€ªçš„æ•°æ®#ZgotmplZï¼Œå®ƒæ˜¯ä¸€ä¸ªå®‰å…¨é˜²æŠ¤çš„é»˜è®¤æ•°æ®ï¼Œè§å®˜æ–¹è¯´æ˜ï¼Œä¼šå¯¼è‡´è®¾ç½®æŒ‡å®šæ—¶é—´å°é¢æ— æ•ˆï¼Œè§£å†³èµ·æ¥ä¹Ÿç®€å•ï¼ŒåŠ ä¸Š| safeURLç®¡é“æ–¹æ³•å°±å¯è§£å†³ï¼› jsã€css å‚è€ƒæ–¹æ¡ˆé‡ŒåŠ¨æ€å¼•å…¥jså’Œcssï¼Œç”¨åˆ°çš„è¯¥æ’­æ”¾å™¨çš„æ–‡ç« é‡Œéœ€è®¾ç½®asciinemaä¸ºtrueï¼š {{ if .Params.asciinema }} \u003cscript src=\"{{ .Site.BaseURL }}js/asciinema-player.js\"\u003e\u003c/script\u003e {{ end }} --- title: Kubernetes Backup - ARK description: Kubernetes backup process using ark asciinema: true tags: - kubernetes - backup --- å¯ä»¥çœ‹åˆ°ä¸Šé¢æ˜¯é€šè¿‡åœ¨æ–‡ç« é‡ŒåŠ asciinemaå‚æ•°å®ç°çš„jsã€cssèµ„æºåŠ¨æ€åŠ è½½ï¼Œå…¶å®å¯ä»¥å‚è€ƒå…¶å®ƒå¦‚mermaidçš„æ¥å…¥æ–¹å¼ï¼Œç›´æ¥åœ¨æ¸²æŸ“æ—¶ç½®æ ‡è®°å°±å¥½ï¼š # themes/iLoveIt/layouts/partials/assets.html {{- /* asciinema */ -}} {{- if (.Scratch.Get \"this\").asciinema | or $params.draft -}} {{- $source := \"lib/asciinema/asciinema-player.min.css\" -}} {{- dict \"Source\" $source \"Fingerprint\" $fingerprint | dict \"Scratch\" .Scratch \"Data\" | partial \"scratch/style.html\" -}} {{- $source := \"lib/asciinema/asciinema-player.min.js\" -}} {{- dict \"Source\" $source \"Fingerprint\" $fingerprint | dict \"Scratch\" .Scratch \"Data\" | partial \"scratch/script.html\" -}} {{- end -}} å…¶ä¸­$params.draftæ˜¯ä¸ºäº†å¼€å‘æ¨¡å¼ä¸‹ä¹Ÿèƒ½è®¾ç½®è‰ç¨¿å‚æ•°è¿›è¡Œé¢„è§ˆ: # themes/iLoveIt/assets/data/cdn/jsdelivr.yml gitalkJS: gitalk@1.7.2/dist/gitalk.min.js # valine@1.5.0 https://valine.js.org/ valineJS: valine@1.5.0/dist/Valine.min.js asciinemaJS: asciinema-player@3.0.1/dist/index.min.js # cookieconsent@3.1.1 https://github.com/osano/cookieconsent cookieconsentCSS: cookieconsent@3.1.1/build/cookiecons","date":"2022-08-28","objectID":"/posts/2022/08/28/hugo-asciinema-player/:0:3","tags":["hugo","tech","asciinema"],"title":"å¦‚ä½•åœ¨Hugoåšå®¢ä¸­ä½¿ç”¨ç»ˆç«¯æ’­æ”¾å™¨Asciinema-Player","uri":"/posts/2022/08/28/hugo-asciinema-player/"},{"categories":["Hugo"],"content":"4.ä½¿ç”¨æ–¹æ³• asciinema-player asciinema-playerå³æ’­æ”¾å™¨ï¼Œåœ¨åšå®¢ä¸­ä½¿ç”¨åªéœ€ç®€å•åœ¨æ–‡ç« ä¸­åŠ å…¥ä»¥ä¸‹ä»£ç ï¼š å…¶ä¸­ï¼Œcolsã€rowsåˆ†åˆ«ä¸ºè¡Œåˆ—ï¼Œpreloadåˆ™æ˜¯è¦ä¸è¦é¢„åŠ è½½ï¼Œposteråˆ™æ˜¯å°é¢ï¼Œæœ‰dataæ¨¡å¼ä¹Ÿæœ‰nptæ¨¡å¼ï¼Œnptå³æŒ‰æ—¶é—´æˆªå–å°é¢ï¼Œä¸Šé¢çš„å°±æ˜¯æˆªå–55ç§’æ—¶çš„ç»ˆç«¯ä½œä¸ºå°é¢ã€‚ å¦å¤–è¿˜æœ‰speedï¼šæ’­æ”¾é€Ÿåº¦ï¼Œautoplayï¼šè‡ªåŠ¨æ’­æ”¾ç­‰å‚æ•°ï¼Œå…·ä½“å¯å‚è€ƒasciinema-playerè®¾ç½® å‘ˆç°æ•ˆæœå¦‚ä¸‹ï¼ˆå€Ÿç”¨äº†helix-editorçš„æ¼”ç¤ºï¼Œæ–‡ä»¶å¤§äº›å¯èƒ½åŠ è½½æ…¢äº›ï¼‰ï¼š ç‚¹å‡»æ’­æ”¾æŒ‰é’®æ’­æ”¾ï¼Œå¯æ‹–åŠ¨è¿›åº¦æ¡æˆ–è€…ä½¿ç”¨æ–¹å‘é”®æ§åˆ¶æ’­æ”¾è¿›åº¦ã€‚ asciinema ä¸Šè¿°ç»ˆç«¯æ’­æ”¾æ‰€ä½¿ç”¨çš„castæ–‡ä»¶ï¼Œéƒ½æ˜¯ä½¿ç”¨asciinemaåœ¨ç»ˆç«¯å½•åˆ¶çš„ã€‚ å®‰è£… brew install asciinema ä½¿ç”¨ âœ ~ asciinema --help usage: asciinema [-h] [--version] {rec,play,cat,upload,auth} ... Record and share your terminal sessions, the right way. positional arguments: {rec,play,cat,upload,auth} rec Record terminal session play Replay terminal session cat Print full output of terminal session upload Upload locally saved terminal session to asciinema.org auth Manage recordings on asciinema.org account options: -h, --help show this help message and exit --version show program's version number and exit example usage: Record terminal and upload it to asciinema.org: asciinema rec Record terminal to local file: asciinema rec demo.cast Record terminal and upload it to asciinema.org, specifying title: asciinema rec -t \"My git tutorial\" Record terminal to local file, limiting idle time to max 2.5 sec: asciinema rec -i 2.5 demo.cast Replay terminal recording from local file: asciinema play demo.cast Replay terminal recording hosted on asciinema.org: asciinema play https://asciinema.org/a/difqlgx86ym6emrmd8u62yqu8 Print full output of recorded session: asciinema cat demo.cast For help on a specific command run: asciinema \u003ccommand\u003e -h å¦å¤–å¦‚æœæƒ³å°†å…¶è½¬åŒ–ä¸ºgifåŠ¨å›¾ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨asciicast2gifã€‚ ","date":"2022-08-28","objectID":"/posts/2022/08/28/hugo-asciinema-player/:0:4","tags":["hugo","tech","asciinema"],"title":"å¦‚ä½•åœ¨Hugoåšå®¢ä¸­ä½¿ç”¨ç»ˆç«¯æ’­æ”¾å™¨Asciinema-Player","uri":"/posts/2022/08/28/hugo-asciinema-player/"},{"categories":["Hugo"],"content":"5.æ€»ç»“ é€šè¿‡ä»¥ä¸Šå®è·µï¼Œè™½ç„¶è¿‡ç¨‹æœ‰äº›æ›²æŠ˜ï¼Œä½†æœ€ç»ˆè¿˜æ˜¯é¡ºåˆ©åœ°å°†asciinema-playerç»ˆç«¯æ’­æ”¾å™¨å¼•å…¥åˆ°äº†hugoä¸­ä½¿ç”¨ï¼Œåç»­å‘å¸ƒçš„åšå®¢ä¹Ÿå°†ç»å¸¸è§åˆ°å…¶èº«å½±ã€‚ ","date":"2022-08-28","objectID":"/posts/2022/08/28/hugo-asciinema-player/:0:5","tags":["hugo","tech","asciinema"],"title":"å¦‚ä½•åœ¨Hugoåšå®¢ä¸­ä½¿ç”¨ç»ˆç«¯æ’­æ”¾å™¨Asciinema-Player","uri":"/posts/2022/08/28/hugo-asciinema-player/"},{"categories":null,"content":"ä¸ªäººç®€ä»‹ å§“åï¼šç‹è¯šå¼º æ˜µç§°ï¼šwhitefirerã€mortywangã€strcatã€ä¸€åªæµæµªçŒ« ğŸ”­ æˆ‘æ­£åœ¨ è…¾è®¯ å·¥ä½œï¼Œç ”ç©¶å¹¶å¼€å‘åŸºç¡€æ¶æ„ã€äº‘åŸç”Ÿã€æœåŠ¡ç½‘æ ¼ï¼ŒåŒæ—¶æ˜¯Aeraki-Meshçš„Maitainerï¼› ğŸŒ± æˆ‘æ­£åœ¨åŠªåŠ›å­¦ä¹ ä»¥æˆä¸ºä¼˜ç§€çš„ äº‘åŸç”Ÿå¼€å‘è€…ã€ åŸºç¡€æ¶æ„å·¥ç¨‹å¸ˆã€ æ¶æ„å¸ˆã€æŠ€æœ¯ç®¡ç†è€…ï¼› ğŸ‘¯ æˆ‘çƒ­è¡·ä¸ºä¼Ÿå¤§çš„é¡¹ç›®ç§¯æåšå‡ºè´¡çŒ®ï¼Œæˆ–è€…è¯´æƒ³åˆ›é€ ä¼Ÿå¤§çš„é¡¹ç›®ï¼› ğŸ’¬ å¯ä»¥ä¸æˆ‘ä¸€èµ·æ¢è®¨ äº‘åŸç”Ÿ ã€ æ¶æ„è®¾è®¡ã€ä¹ƒè‡³ä¸€åˆ‡ æœ‰è¶£çš„æŠ€æœ¯ ğŸ˜„ï¼› âš¡ æ˜¾è€Œæ˜“è§: æˆ‘æ˜¯ä¸€å GEEKï¼› è”ç³»æ–¹å¼ï¼šå‘é‚®ä»¶ç»™æˆ‘ æˆ–è€…ä»¥ä¸‹æ–¹å¼â†“ ","date":"2022-08-21","objectID":"/about/:0:1","tags":null,"title":"å…³äºæˆ‘","uri":"/about/"},{"categories":null,"content":"æ¼”è®²å’Œè®²ä¹‰ OpenTalkæ¼”è®²ï¼šè”æå¾®è¯¾åŸºç¡€æ¶æ„çš„æ¼”è¿›ä¸å®è·µ è…¾è®¯äº‘äº‘åŸç”Ÿå¤§ä¼šï¼šè”æå¾®è¯¾åŸºäº Kubernetes æ­å»ºåˆ†å¸ƒå¼å‹æµ‹ç³»ç»Ÿ IstioCon 2022åˆ†äº«: Istio + Aeraki åœ¨è…¾è®¯éŸ³ä¹çš„æœåŠ¡ç½‘æ ¼è½åœ° ","date":"2022-08-21","objectID":"/about/:0:2","tags":null,"title":"å…³äºæˆ‘","uri":"/about/"},{"categories":null,"content":"è£èª‰ ğŸ† 2020å¹´è£è·è”æå¾®è¯¾Sçº§è´¡çŒ®å‘˜å·¥ç§°å·ï¼ˆå…¬å¸çº§æœ€é«˜è£èª‰ï¼‰ ğŸ† 2022å¹´è…¾è®¯æ–°ä»£ç æ–‡åŒ–å›¢é˜Ÿé‡‘å¥–ï¼ˆé›†å›¢å…¬å¸çº§ï¼ŒAeraki Mesh Teamï¼‰ ğŸ¥‡ 2022å¹´è…¾è®¯æ–°ä»£ç æ–‡åŒ–ä¸ªäººå¥–ï¼ˆé›†å›¢å…¬å¸çº§ï¼Œæ¯å›¢é˜Ÿä¸€åé¢ï¼ŒAeraki Mesh Maintainerï¼‰ ","date":"2022-08-21","objectID":"/about/:0:3","tags":null,"title":"å…³äºæˆ‘","uri":"/about/"},{"categories":null,"content":"è‡ªæˆ‘è¯„ä»· åå¹´ä»ä¸šç»éªŒï¼Œé˜…å†ä¸°å¯Œï¼Œæœ‰ç€åˆ›ä¸šç»å†ï¼Œç°åœ¨è…¾è®¯éŸ³ä¹å›½é™…ä¸šåŠ¡éƒ¨è¿™è¾¹è´Ÿè´£åŸºç¡€æ¶æ„ï¼ŒåŒ…æ‹¬äº‘åŸç”Ÿå’ŒæœåŠ¡ç½‘æ ¼ï¼Œæ›´æ—©æ˜¯åœ¨è”æå¾®è¯¾æ‹…ä»»åŸºç¡€æ¶æ„è´Ÿè´£äºº(ç›´æ¥æ±‡æŠ¥CTO)ï¼Œè½åœ°äº†k8sé›†ç¾¤å’ŒistioæœåŠ¡ç½‘æ ¼åœ¨å†…çš„äº‘åŸç”Ÿæ¶æ„ï¼Œå¹¶è´Ÿè´£å¼€å‘äº†é…ç½®ä¸­å¿ƒã€DevOpså¹³å°å’Œåˆ†å¸ƒå¼å‹æµ‹ç³»ç»Ÿç­‰ä¸€ç³»åˆ—åŸºç¡€å¹³å°ã€‚ä»0åˆ°1å®ç°äº†äº‘åŸç”Ÿå’ŒåŸºç¡€æ¶æ„æ”¹é€ ï¼Œä¹Ÿä»0åˆ°1æ­å»ºè¿‡å›¢é˜Ÿï¼Œå¹¶å¯Œæœ‰åˆ›é€ åŠ›ï¼Œèƒ½å¤Ÿä»å…¨å±€å‡ºå‘è€ƒè™‘é—®é¢˜ï¼ŒæŠ“ä½ç¨³å®šå’Œé«˜æ•ˆçš„é‡ç‚¹ï¼Œå¹¶å®é™…æ¨è¿›è½åœ°ï¼Œå…·æœ‰Geekç²¾ç¥ï¼Œå¯¹æ–°æŠ€æœ¯ä¿æŒå­¦ä¹ çƒ­æƒ…ï¼Œå…³æ³¨CNCFç¤¾åŒºçš„å‘å±•ï¼Œçƒ­è¡·äºå¼€æºäº‹ä¸šï¼Œå­¦ä¹ å¹¶å‚ä¸å¼€æºé¡¹ç›®çš„å¼€å‘ï¼Œä¸æ–­åœ¨ä¸ä»–äººçš„äº¤æµä¸­è·å¾—çµæ„Ÿå…±åŒè¿›æ­¥ã€‚ ç¼–ç¨‹è¯­è¨€ å¼€å‘æ¡†æ¶ æ•°æ®åº“\u0026ç»„ä»¶ å¸¸ç”¨å·¥å…· ä¼‘é—²å¹³å° æ“ä½œç³»ç»Ÿ ","date":"2022-08-21","objectID":"/about/:0:4","tags":null,"title":"å…³äºæˆ‘","uri":"/about/"},{"categories":null,"content":"å¾®ä¿¡æ‰«ç  ","date":"2022-08-21","objectID":"/about/:0:5","tags":null,"title":"å…³äºæˆ‘","uri":"/about/"},{"categories":["Tech","Hugo"],"content":"èƒŒæ™¯ ","date":"2022-08-13","objectID":"/posts/2022/08/13/how-to-settingup-blog-with-hugo-github-netlify/:0:1","tags":["tech","hugo","github","netlify"],"title":"å¦‚ä½•ä½¿ç”¨Hugo+Github+Netlifyæ­å»ºåšå®¢","uri":"/posts/2022/08/13/how-to-settingup-blog-with-hugo-github-netlify/"},{"categories":["Tech","Hugo"],"content":"æ–¹æ¡ˆ é€šè¿‡é…ç½® Github Action æ¥ç¼–è¯‘æ„å»ºæˆ‘ä»¬çš„ç½‘ç«™æ–‡ä»¶å¹¶å‘å¸ƒåˆ° Github Pages ã€‚ ä¸æ­¤åŒæ—¶ï¼Œé€šè¿‡ Netlify ç›‘å¬ Github ä»“åº“çš„å˜åŒ–ï¼ŒåŒæ­¥æ›´æ–°éƒ¨ç½²åˆ° Netlify App ç½‘ç«™ã€‚ å½“ç„¶å…¶ä¸­æ¯ä¸ªæ­¥éª¤éƒ½å¯ä»¥æ›¿æ¢æˆ–åŒæ—¶æœ‰å…¶å®ƒæ–¹å¼ï¼Œå¦‚æµæ°´çº¿ä¹Ÿå¯ä»¥ç”¨circleciä¹‹ç±»çš„ï¼Œç½‘ç«™æ‰˜ç®¡ä¹Ÿå¯ä»¥ç”¨nginxæœåŠ¡å™¨ã€SCFäº‘å‡½æ•°ã€OSSå¯¹è±¡å­˜å‚¨ç­‰æ–¹å¼ã€‚ æ„å»ºæµæ°´çº¿ï¼ˆGithub Actionï¼‰ Github Action çš„ workflows é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š # mysite/.github/workflows/build-and-sync-website.yml name: build on: # è§¦å‘æ—¶æœº workflow_dispatch: # æ‰‹åŠ¨è§¦å‘ push: # ä»£ç æäº¤è§¦å‘ branches: # åœ¨å“ªä¸ªåˆ†æ”¯ - main # åœ¨mainåˆ†æ”¯ pull_request: # PRæäº¤æ—¶è§¦å‘ jobs: # å·¥ä½œæµ build: # å·¥ä½œåç§° runs-on: ubuntu-latest steps: - name: Checkout uses: actions/checkout@v2 with: submodules: true fetch-depth: 0 - name: Setup Hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: \"latest\" extended: true - name: Build Web run: hugo -v --gc - name: Deploy Web to Github Pages uses: peaceiris/actions-gh-pages@v3 with: PERSONAL_TOKEN: ${{ secrets.BLOG_TOKEN }} EXTERNAL_REPOSITORY: whitefirer/whitefirer.github.io PUBLISH_BRANCH: main PUBLISH_DIR: ./public commit_message: ${{ github.event.head_commit.message }} # - uses: manyuanrong/setup-ossutil@v2.0 # with: # # endpoint å¯ä»¥å»ossæ§åˆ¶å°ä¸ŠæŸ¥çœ‹ # endpoint: \"oss-cn-hongkong.aliyuncs.com\" # # ä½¿ç”¨æˆ‘ä»¬ä¹‹å‰é…ç½®åœ¨secretsé‡Œé¢çš„accesskeysæ¥é…ç½®ossutil # access-key-id: ${{ secrets.ACCESS_KEY_ID }} # access-key-secret: ${{ secrets.ACCESS_KEY_SECRET }} # - name: Deply Web To OSS # run: ossutil cp public oss://blog-whitefirer/ -rf å¾½ç« ï¼ˆBadgeï¼‰ [![Netlify Status](https://api.netlify.com/api/v1/badges/8aeed089-7b2c-4ebe-84e9-8df704f39948/deploy-status)](https://app.netlify.com/sites/whitefirer/deploys) [![GitHub](https://github.com/whitefirer/mysite/actions/workflows/build-and-sync-website.yml/badge.svg)](https://github.com/whitefirer/mysite/actions/workflows/build-and-sync-website.yml) æ•ˆæœå¦‚ä¸‹ï¼š å¯ä»¥é€šè¿‡è§‚æµ‹æ˜¾ç¤ºçš„æ ·å¼æ¥ç¡®è®¤ç½‘ç«™æ›´æ–°çŠ¶æ€ï¼Œä¹Ÿå¯ä»¥ç‚¹å‡»å¾½ç« åæŸ¥çœ‹æ„å»ºå’Œå‘å¸ƒçš„æ—¥å¿—è¯¦æƒ…ã€‚ HTTPSåŸŸåè¯ä¹¦ï¼ˆLetâ€™s Encrypt CAï¼‰ åŸŸåè¯ä¹¦è¿™é‡Œç”¨çš„å…è´¹è¯ä¹¦ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è´­ä¹°è¯ä¹¦ã€‚ ","date":"2022-08-13","objectID":"/posts/2022/08/13/how-to-settingup-blog-with-hugo-github-netlify/:0:2","tags":["tech","hugo","github","netlify"],"title":"å¦‚ä½•ä½¿ç”¨Hugo+Github+Netlifyæ­å»ºåšå®¢","uri":"/posts/2022/08/13/how-to-settingup-blog-with-hugo-github-netlify/"},{"categories":["Tech","Hugo"],"content":"æ€»ç»“ æ•´ä¸ªæ–¹æ¡ˆè¾ƒç®€å•ï¼Œç»´æŠ¤èµ·æ¥ä¹Ÿå®¹æ˜“ï¼Œæ¯æ¬¡å˜æ›´é€šè¿‡Gitæäº¤å³å¯è‡ªåŠ¨è§¦å‘æ„å»ºéƒ¨ç½²ã€‚ åé¢æœ‰æ—¶é—´äº†æˆ‘å†åˆ†äº«ä¸‹ç½‘ç«™åŠŸèƒ½å’Œä¸»é¢˜çš„å¼€å‘æ‰©å±•ã€‚ ","date":"2022-08-13","objectID":"/posts/2022/08/13/how-to-settingup-blog-with-hugo-github-netlify/:0:3","tags":["tech","hugo","github","netlify"],"title":"å¦‚ä½•ä½¿ç”¨Hugo+Github+Netlifyæ­å»ºåšå®¢","uri":"/posts/2022/08/13/how-to-settingup-blog-with-hugo-github-netlify/"},{"categories":["Tech"],"content":" å¯¼è¯­ æœ¬æ–‡æ ¹æ®2021å¹´4æœˆ10æ—¥æ·±åœ³ç«™ä¸¾åŠçš„ã€è…¾è®¯äº‘åŸç”ŸæŠ€æœ¯å¼€æ”¾æ—¥ã€‘ çº¿ä¸‹æ´»åŠ¨ä¸­ï¼Œè”æå¾®è¯¾åŸºç¡€æ¶æ„è´Ÿè´£äººç‹è¯šå¼ºå…³äºâ€œåŸºäº kubernetes æ­å»ºåˆ†å¸ƒå¼å‹æµ‹ç³»ç»Ÿâ€çš„æ¼”è®²æ•´ç†è€Œæˆã€‚ å¤§å®¶å¥½ï¼Œä»Šå¤©æƒ³å’Œå¤§å®¶åˆ†äº«çš„ä¸»é¢˜æ˜¯åŸºäº kubernetes æ­å»ºåˆ†å¸ƒå¼å‹æµ‹ç³»ç»Ÿã€‚ä»èƒŒæ™¯ã€åŸç†ã€å®ç°ã€æ•ˆæœå’Œæœªæ¥æ–¹å‘5ä¸ªæ–¹é¢è®²è§£äº†è”æå¾®è¯¾åœ¨åŸºäº kubernetes æ­å»ºåˆ†å¸ƒå¼å‹æµ‹ç³»ç»Ÿä¸Šçš„å®è·µå’Œæ€è€ƒã€‚ ","date":"2021-04-13","objectID":"/posts/2021/04/13/building-a-distributed-pressure-testing-system-based-on-kubernetes/:0:0","tags":["tech","cloud native"],"title":"è”æå¾®è¯¾åŸºäº kubernetes æ­å»ºåˆ†å¸ƒå¼å‹æµ‹ç³»ç»Ÿ","uri":"/posts/2021/04/13/building-a-distributed-pressure-testing-system-based-on-kubernetes/"},{"categories":["Tech"],"content":"èƒŒæ™¯ è”æå¾®è¯¾ä½œä¸ºä¸€ä¸ªé«˜é€Ÿå‘å±•çš„å¹³å°ï¼Œé¢ä¸´ç€ä¸šåŠ¡æµé‡è¶Šæ¥è¶Šå¤§çš„å†²å‡»ï¼Œç‰¹åˆ«æ˜¯åœ¨å»å¹´ç–«æƒ…æœŸé—´é­é‡æˆå€æµé‡å¢é•¿çš„æƒ…å†µï¼Œæ˜¯é€šè¿‡ä»€ä¹ˆæ–¹å¼è½»æ¾æ¸¡è¿‡éš¾å…³çš„ï¼Ÿä»¥æˆ‘åœ¨è”æå¾®è¯¾è½åœ°äº‘åŸç”Ÿçš„ç»å†æ¥è¯´ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è¦å»å®è·µäº‘åŸç”Ÿæ¶æ„å‘¢ï¼Ÿåªæ˜¯å› ä¸ºå®ƒæ˜¯ä¸šå†…æŠ€æœ¯è¶‹åŠ¿å—ï¼Ÿ å…¶å®è¿™æ˜¯æºäºä¸šåŠ¡éœ€è¦çš„ï¼ŒåŸºç¡€æ¶æ„æœ€é‡è¦çš„æ˜¯ç¨³å®šé«˜æ•ˆï¼Œåœ¨æˆ‘æœ€æ—©æ¥æ‰‹å¹¶è´Ÿè´£è”æå¾®è¯¾åŸºç¡€æ¶æ„æ—¶ï¼Œç¬¬ä¸€ä¸ªå­£åº¦çš„ç›®æ ‡å±…ç„¶æ˜¯åº”æ€¥å“åº”ï¼Œä½†æˆ‘ä»¬éƒ½çŸ¥é“åº”æ€¥å“åº”æ˜¯æ²»æ ‡ä¸æ²»æœ¬çš„ï¼Œè€Œè¦æ²»æœ¬æ ¹æ²»çš„è¯é‚£ä¹ˆå°±è¦å¯¹æ”¹æ‰æ•´ä¸ªåº•å±‚åŸºç¡€æ¶æ„ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè”æå¾®è¯¾ä¼šå»åšäº‘åŸç”Ÿå®è·µçš„åŸå› ã€‚ è€Œåœ¨åšè¿™ä¸ªå®è·µçš„æ—¶å€™ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªå·¥å…·æ¥è¡¡é‡ï¼Œé‚£å°±æ˜¯åˆ†å¸ƒå¼å‹æµ‹ç³»ç»Ÿã€‚æˆ‘ä»¬æ—©æœŸä½¿ç”¨è¿‡æœ¬åœ°å‹æµ‹ã€CVM ä¼¸ç¼©ç»„å‹æµ‹ç­‰æ–¹æ¡ˆï¼Œä½†æ˜¯ä»–ä»¬æœ‰ç€æœ¬åœ°èµ„æºèƒ½åŠ›æœ‰é™ã€ä¼¸ç¼©ç»„ç”³è¯·å˜æ›´éº»çƒ¦ã€ä¼¸ç¼©é€Ÿåº¦è¾ƒæ…¢ã€å‹æµ‹è„šæœ¬å’ŒæŠ¥å‘Šç®¡ç†æ··ä¹±ï¼Œç»å¸¸æ— å­˜æ¡£ç­‰ç¼ºç‚¹ã€‚äºæ˜¯æˆ‘ä»¬é‡‡ç”¨äº†ç°åœ¨çš„åŸºäº kubernetes çš„åˆ†å¸ƒå¼å‹æµ‹æ–¹æ¡ˆã€‚ ","date":"2021-04-13","objectID":"/posts/2021/04/13/building-a-distributed-pressure-testing-system-based-on-kubernetes/:0:1","tags":["tech","cloud native"],"title":"è”æå¾®è¯¾åŸºäº kubernetes æ­å»ºåˆ†å¸ƒå¼å‹æµ‹ç³»ç»Ÿ","uri":"/posts/2021/04/13/building-a-distributed-pressure-testing-system-based-on-kubernetes/"},{"categories":["Tech"],"content":"åˆ†å¸ƒå¼å‹æµ‹æ–¹æ¡ˆå€ŸåŠ©çš„ä¸‰ä¸ªæŠ€æœ¯ åŸç†ä¸Šæ¥è®²ï¼Œéœ€è¦å€ŸåŠ©ä¸‰æ–¹é¢çš„æŠ€æœ¯ï¼š ç¼–ç¨‹æŠ€æœ¯ è¿™é‡Œæˆ‘ä»¬é€‰æ‹©äº†æˆ‘ä»¬å›¢é˜Ÿè¾ƒç†Ÿæ‚‰çš„ pythonï¼Œä¸åŒå›¢é˜Ÿå¯ä»¥æœ‰ä¸åŒçš„é€‰æ‹©ã€‚ å‹æµ‹å¼•æ“ æˆ‘ä»¬ç”¨çš„æ˜¯ Locustï¼Œå› ä¸ºå®ƒæ˜¯ç”¨ python å†™è„šæœ¬ï¼Œå…¶å®ä¹Ÿå¯ä»¥æ›´æ¢æˆ jmeter ä¹‹ç±»çš„å…¶å®ƒå‹æµ‹å¼•æ“ã€‚ kubernetes ä¸»è¦åˆ©ç”¨å®ƒçš„æœåŠ¡ç¼–æ’æŠ€æœ¯æ¥è¿›è¡Œä¸€ä¸ªèµ„æºä¸Šçš„è°ƒåº¦ï¼Œç»è¿‡æˆ‘ä»¬æµ‹è¯•ï¼Œå¦‚æœæ˜¯æ™®é€šé›†ç¾¤ï¼Œåœ¨éœ€è¦å¼¹å‡ºé›†ç¾¤ç‰©ç†èŠ‚ç‚¹çš„æƒ…å†µä¸‹ï¼Œå…¨éƒ¨å°±ç»ªéœ€è¦90ç§’ï¼Œä½†æ˜¯ä½¿ç”¨å¼¹æ€§é›†ç¾¤ï¼Œåˆ™å¯ä»¥å‹ç¼©åˆ°15~20ç§’ï¼Œæ‰€ä»¥æ¨èä½¿ç”¨å¼¹æ€§é›†ç¾¤ã€‚ ","date":"2021-04-13","objectID":"/posts/2021/04/13/building-a-distributed-pressure-testing-system-based-on-kubernetes/:0:2","tags":["tech","cloud native"],"title":"è”æå¾®è¯¾åŸºäº kubernetes æ­å»ºåˆ†å¸ƒå¼å‹æµ‹ç³»ç»Ÿ","uri":"/posts/2021/04/13/building-a-distributed-pressure-testing-system-based-on-kubernetes/"},{"categories":["Tech"],"content":"æ•´ä½“æ¡†æ¶ æ•´ä¸ªæŠ€æœ¯æ¡†æ¶åŸç†ä¸Šï¼Œå‹æµ‹èŠ‚ç‚¹åˆ†ä¸ºä¸»èŠ‚ç‚¹ï¼ˆmasterï¼‰ã€ä»èŠ‚ç‚¹ ï¼ˆslaveï¼‰å’Œç›‘æ§èŠ‚ç‚¹ï¼ˆmonitorï¼‰ä¸‰ç§ç±»å‹ï¼š ä¸»èŠ‚ç‚¹ è´Ÿè´£ä»»åŠ¡ç®¡ç†å’Œæ•°æ®é‡‡é›†èšåˆï¼Œæœ¬èº«ä¸è¿›è¡Œå‹æµ‹ä»»åŠ¡ ä»èŠ‚ç‚¹ è´Ÿè´£å‹æµ‹ä»»åŠ¡ ç›‘æ§èŠ‚ç‚¹ ä»ä¸»èŠ‚ç‚¹å°†ç»“æœé€šè¿‡ webhook ä¼ é€’ç»™ web æœåŠ¡å¤„ç†ç«¯ï¼› å¦å¤–è¿™äº›èŠ‚ç‚¹çš„çŠ¶æ€ã€æ—¥å¿—éƒ½ä¼šé€šè¿‡ K8s çš„ api è¿›è¡Œé‡‡é›†ã€‚æ ¹æ®å‹æµ‹ä»»åŠ¡é‡Œä¸»ä»èŠ‚ç‚¹æ‰€ç”³è¯·çš„èµ„æºï¼Œé›†ç¾¤å°†æå‰ä¼¸ç¼©å¥½èŠ‚ç‚¹ï¼Œå¹¶å°†ä»»åŠ¡åˆ†é…åˆ°ä¸åŒèŠ‚ç‚¹ï¼Œä»¥è¾¾åˆ°åŠ¨æ€æé«˜å‹æµ‹èƒ½åŠ›çš„ç›®çš„ã€‚ ","date":"2021-04-13","objectID":"/posts/2021/04/13/building-a-distributed-pressure-testing-system-based-on-kubernetes/:0:3","tags":["tech","cloud native"],"title":"è”æå¾®è¯¾åŸºäº kubernetes æ­å»ºåˆ†å¸ƒå¼å‹æµ‹ç³»ç»Ÿ","uri":"/posts/2021/04/13/building-a-distributed-pressure-testing-system-based-on-kubernetes/"},{"categories":["Tech"],"content":"å‹æµ‹æµç¨‹ å³è¾¹ä¸ºç”¨æˆ·æ‰€æ„ŸçŸ¥åˆ°çš„è¿‡ç¨‹ï¼Œå‹æµ‹é›†ä¸­åŒ…æ‹¬å¤šä¸ªå‹æµ‹åœºæ™¯ï¼Œé€šè¿‡ç¼–å†™å‹æµ‹è„šæœ¬å’Œé…ç½®å‹æµ‹å‚æ•°çš„æ–¹å¼ç”Ÿæˆå‹æµ‹ä»»åŠ¡ï¼Œå¹¶æœ€ç»ˆç”Ÿæˆå‹æµ‹æŠ¥å‘Šã€‚ å·¦è¾¹ä¸º python æ§åˆ¶é›†ç¾¤æ¥ç”Ÿæˆä»»åŠ¡çš„è¿‡ç¨‹ï¼Œå…·ä½“æ˜¯æ¸²æŸ“ç”Ÿæˆä¸åŒä»»åŠ¡çš„yaml æ–‡ä»¶åï¼Œç”Ÿæˆç›¸åº”çš„ job podï¼Œç„¶åæŒç»­å°† pod çŠ¶æ€ ã€æ—¥å¿—å’Œå‹æµ‹æ›²çº¿ç»“æœåé¦ˆåœ¨é¡µé¢ä¸Šã€‚ æ•´ä¸ªè¿‡ç¨‹æ‰€ä½¿ç”¨çš„æŠ€æœ¯å¹¶æ²¡æœ‰å¤šé«˜æ·±ï¼Œä¸»è¦æ˜¯åœ¨é›†ç¾¤åº”ç”¨ä¸Šçš„ä¸€ç§æ¢ç´¢ã€‚ ","date":"2021-04-13","objectID":"/posts/2021/04/13/building-a-distributed-pressure-testing-system-based-on-kubernetes/:0:4","tags":["tech","cloud native"],"title":"è”æå¾®è¯¾åŸºäº kubernetes æ­å»ºåˆ†å¸ƒå¼å‹æµ‹ç³»ç»Ÿ","uri":"/posts/2021/04/13/building-a-distributed-pressure-testing-system-based-on-kubernetes/"},{"categories":["Tech"],"content":"å®ç°æ–¹æ³• ä½¿ç”¨ yaml ç¼–æ’ job æœåŠ¡ï¼Œä¸¾ä¾‹ slave èŠ‚ç‚¹æ¥è¯´ï¼Œä¸»è¦æ˜¯å£°æ˜ä¸€ä¸ª job ç±»å‹çš„å·¥ä½œè´Ÿè½½ï¼Œå°†ç”Ÿæˆçš„ä»»åŠ¡ä»èŠ‚ç‚¹åä»¥åŠä»»åŠ¡ç”Ÿæˆçš„å‘½åç©ºé—´æ¸²æŸ“ä¸Šå»ï¼Œç„¶åè®¾ç½®æˆ‘ä»¬çš„å‹æµ‹åŸºç¡€é•œåƒä»¥åŠå¯åŠ¨å‘½ä»¤ï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨åˆ°äº† kubernetes çš„å‡ ä¸ªæŠ€å·§ã€‚ä¸€ä¸ªæ˜¯é€šè¿‡ hostAliases è¿›è¡Œå†…éƒ¨è§£æï¼Œè¿™æ ·å¯ä»¥å¯¹ä¸€äº›å†…ç½‘ä»£ç†è¿›è¡Œå‹æµ‹ï¼Œå¦ä¸€ä¸ªæ˜¯å£°æ˜ç”³è¯·èµ„æºCPUï¼Œä»¥ä¾¿åœ¨ä»»åŠ¡å¯åŠ¨å‰æå‰ä¼¸ç¼©å¥½ç‰©ç†èŠ‚ç‚¹æä¾›èµ„æºï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯é€šè¿‡ configmap æŒ‚è½½å¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¿™æ ·å¯ä»¥æ³¨å…¥å‚æ•°åœ¨å˜åŒ–çš„å¯åŠ¨å‘½ä»¤ï¼Œè€Œä¸éœ€è¦é‡æ–°æ„å»ºé•œåƒã€‚ ç„¶åè¯´ä¸€ä¸‹æˆ‘ä»¬çš„ä»£ç æ¡†æ¶ï¼Œä¸»è¦æ˜¯åˆ†ä¸ºè¿™å‡ ä¸ªæ¨¡å—ï¼š K8sæ¨¡å—ï¼Œæä¾›ä¸€äº›å¦‚åˆ›å»ºé”€æ¯å‘½åç©ºé—´æˆ– podã€æŸ¥çœ‹çŠ¶æ€ã€æ‹‰å–æ—¥å¿—ç­‰apiåŠŸèƒ½ï¼› åŸºç¡€é•œåƒï¼Œè¾ƒä¸ºç®€å•ï¼Œä¸»è¦å®‰è£…äº†ä¸€äº›åŸºç¡€é€šç”¨çš„åº“ï¼Œç„¶åå¼€é€šäº†ä¸€äº›å†…éƒ¨ä½¿ç”¨çš„ç«¯å£ï¼› ä»»åŠ¡ç¼–æ’å£°æ˜æ–‡ä»¶ï¼ŒåŒ…æ‹¬äº†æˆ‘ä¸Šé¢è¯´çš„å‡ ç§èŠ‚ç‚¹æœåŠ¡ï¼› ä»»åŠ¡æ ¸å¿ƒæ–¹æ³•ç±»ï¼Œä¸»è¦æ˜¯å°†ä¸Šè¿°çš„æµç¨‹ä»£ç å®ç°ï¼Œæä¾›äº†ä¸€äº›æ–¹æ³•ï¼Œè¿™é‡Œé™äºç¯‡å¹…å°±ä¸å…·ä½“å±•å¼€äº†ã€‚ ç„¶åæœ€åæˆ‘ä»¬æ¥çœ‹ä¸‹æ•ˆæœï¼š è¿™æ˜¯æˆ‘ä»¬å‹æµ‹ç³»ç»Ÿçš„ç®¡ç†ç•Œé¢ï¼Œç°åœ¨çœ‹åˆ°çš„æ˜¯å‹æµ‹é›†ï¼Œæ–¹ä¾¿é›†ä¸­ç®¡ç†ã€‚ è¿™æ˜¯åˆ›å»ºå‹æµ‹åœºæ™¯ï¼Œå¹¶åŸºäºè¯¥åœºæ™¯ç¼–å†™ python å‹æµ‹è„šæœ¬ï¼Œå¹¶å¯è®¾ç½®æˆ‘ä»¬çš„ä»»åŠ¡å‚æ•°ã€‚ è¿™æ˜¯å‹æµ‹ä»»åŠ¡è¯¦æƒ…é¡µï¼Œå¯ä»¥çœ‹åˆ°å‹æµ‹å‚æ•°ã€çŠ¶æ€ä»¥åŠèŠ‚ç‚¹æƒ…å†µå’ŒæŸ¥çœ‹æ—¥å¿—ã€‚ è¿™æ˜¯å‹æµ‹è¿‡ç¨‹ä¸­å®æ—¶ç”Ÿæˆçš„å›¾è¡¨ï¼Œå¯ä»¥åŸºäºå›¾è¡¨æƒ…å†µè¿›è¡Œåˆ†æã€‚ ","date":"2021-04-13","objectID":"/posts/2021/04/13/building-a-distributed-pressure-testing-system-based-on-kubernetes/:0:5","tags":["tech","cloud native"],"title":"è”æå¾®è¯¾åŸºäº kubernetes æ­å»ºåˆ†å¸ƒå¼å‹æµ‹ç³»ç»Ÿ","uri":"/posts/2021/04/13/building-a-distributed-pressure-testing-system-based-on-kubernetes/"},{"categories":["Tech"],"content":"æœªæ¥æ”¹è¿›æ–¹å‘ å¼•æ“ç±»å‹æˆ–ç‰ˆæœ¬å…è®¸é€‰æ‹©æ›´æ¢ï¼› æ‰¹é‡å®šæ—¶åˆ†é˜¶æ®µçš„è‡ªåŠ¨å‹æµ‹è®¡åˆ’ï¼› å°†æ‰€æœ‰æ¶‰åŠèµ„æºå›¾è¡¨å…³è”è¿›æ¥ï¼Œå½¢æˆæ›´ä¸ºè¯¦å°½çš„æŠ¥å‘Šï¼› ä»»åŠ¡èµ„æºé™åˆ¶ä¸ä½¿ç”¨å®¡æ‰¹ï¼› æŠ¥å‘Šåˆ†æç»“è®ºå­˜æ¡£ï¼Œç›¸å…³é—®é¢˜è¿½è¸ªå¤„ç†ç»“æœå­˜æ¡£ï¼› ç›¸åŒæ¡ä»¶çš„å¤šæ¬¡å‹æµ‹ç»“æœå¯¹æ¯”å±•ç¤ºï¼› ä½¿ç”¨æ›´ä¸ºäº‘åŸç”Ÿçš„æ–¹å¼ç®¡ç†ä»»åŠ¡çš„ç”Ÿå‘½å‘¨æœŸï¼› ","date":"2021-04-13","objectID":"/posts/2021/04/13/building-a-distributed-pressure-testing-system-based-on-kubernetes/:0:6","tags":["tech","cloud native"],"title":"è”æå¾®è¯¾åŸºäº kubernetes æ­å»ºåˆ†å¸ƒå¼å‹æµ‹ç³»ç»Ÿ","uri":"/posts/2021/04/13/building-a-distributed-pressure-testing-system-based-on-kubernetes/"},{"categories":["Tech"],"content":"Q\u0026Aç¯èŠ‚ Qï¼šè¿™ä¸ªå‹æµ‹ç³»ç»Ÿå¯¹äºæµ‹è¯•äººå‘˜çš„æŠ€èƒ½æœ‰ä»€ä¹ˆè¦æ±‚å—ï¼Ÿ Aï¼šéœ€è¦ä¼šä½¿ç”¨ç¼–ç¨‹è¯­è¨€ç¼–å†™å‹æµ‹è„šæœ¬ï¼Œå¹¶æœ‰ä¸€å®šçš„åˆ†ææ€è€ƒèƒ½åŠ›ï¼Œé€šè¿‡è¿›ä¸€æ­¥å°è£…çš„è¯ä¹Ÿå¯ä»¥é™ä½è¿™éƒ¨åˆ†çš„è¦æ±‚ï¼Œä½†ç¼–ç¨‹çš„è¯èƒ½åŠ›ä¼šæ›´å¼ºæ›´çµæ´»ï¼Œæ¯”å¦‚ä¸€äº›å¤æ‚æ¡ä»¶æˆ–è€…åƒè¦åŠ¨æ€ä½¿ç”¨è´¦å·çš„æƒ…å†µã€‚ Qï¼šæˆ‘ä»¬å…¬å¸çš„å‹æµ‹æ˜¯æ¯æ¬¡å‹æµ‹ä¹‹å‰ç”³è¯·ä¸€æ‰¹è™šæ‹Ÿæœºï¼Œå‹å®Œä¹‹åé”€æ¯ï¼Œè¿™ç§è‡ªåŠ¨åŒ–å‹æµ‹çš„æ–¹å¼è¿˜æ˜¯èƒ½èŠ‚çœä¸å°‘æˆæœ¬çš„ã€‚æˆ‘æƒ³é—®ä¸€ä¸‹ï¼Œå¯¹äºæ“ä½œå›¢é˜Ÿä½¿ç”¨æˆæœ¬é«˜ä¸é«˜ï¼Ÿ Aï¼šæˆ‘ä»¬è¿™è¾¹çš„å‹æµ‹æˆæœ¬æ˜¯ä¸é«˜çš„ï¼Œå› ä¸ºå‹æµ‹ä»»åŠ¡ï¼Œæˆ‘ä»¬éƒ½æ˜¯æ”¾åœ¨é›†ç¾¤ä¸Šçš„ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ç”¨äº†å¤šå°‘æ‰ä¼šå»ç”³è¯·ã€æ‰ä¼šå¼¹å‡ºé‚£ä¹ˆå¤šã€‚ç­‰å‹æµ‹ä»»åŠ¡ç»“æŸåï¼Œå®ƒæ˜¯è‡ªåŠ¨é‡Šæ”¾çš„ï¼Œæˆ‘æ˜¯æŠŠèµ„æºéƒ½é”€æ¯æ‰çš„ã€‚ Qï¼šè¿™ä¸ªå¯¹äºæœåŠ¡åœ¨å“ªä¸ªäº‘æœ‰è¦æ±‚å—? Aï¼šè™½ç„¶æˆ‘åˆšæ‰è¯´åˆ°çš„é›†ç¾¤æ˜¯ TKE çš„ï¼Œä½† kubernetes ä½œä¸ºä¸€é¡¹å¼€æºçš„ã€é€šç”¨çš„æ ‡å‡†åŒ–æŠ€æœ¯ï¼Œåªè¦èƒ½æä¾›è¯¥æœåŠ¡çš„äº‘ï¼Œç†è®ºä¸Šéƒ½å¯ä»¥ã€‚ Qï¼šä½ ä»¬å‹æµ‹ä¼šå‹ç”Ÿäº§å—ï¼Ÿå¤§æ¦‚å¤šä¹…å‹ä¸€æ¬¡ï¼Ÿè„æ•°æ®æ€ä¹ˆåŠï¼Ÿ Aï¼šæˆ‘ä»¬å‹æµ‹ä¼šåœ¨å°½é‡ä¸å½±å“ç”¨æˆ·çš„æƒ…å†µä¸‹å®šæœŸè¿›è¡Œçº¿ä¸Šå‹æµ‹ï¼Œå¤§æ¦‚æ˜¯æ¯æœˆä¸€æ¬¡ï¼Œæ–°é¡¹ç›®ä¸Šçº¿å‰ä¹Ÿä¼šåœ¨æµ‹è¯•ç¯å¢ƒå‹ï¼Œä¹Ÿæœ‰ä¸“é—¨çš„å‹æµ‹é›†ç¾¤æ¥å‹ï¼Œè„æ•°æ®çš„è¯ä¹Ÿæ˜¯è¦æ¸…çš„ï¼Œæˆ‘ä»¬æœ‰æœºå™¨äººç”¨æˆ·ï¼Œå¯ä»¥é’ˆå¯¹è¿™äº›ç”¨æˆ·è¿›è¡Œè„æ•°æ®æ¸…ç†ã€‚ Qï¼šæˆ‘ä»¬å…¬å¸å·²ç»æœ‰ç”¨å‡ å°æœåŠ¡å™¨æ¥å‹æµ‹ï¼Œæƒ³é—®ä¸‹ä¸ºä»€ä¹ˆè¦ç”¨ kubernetes é›†ç¾¤å‘¢ï¼Ÿ Aï¼šä¸€æ–¹é¢æˆ‘ä»¬å½“æ—¶åˆšå¥½åœ¨åšé›†ç¾¤æ–¹é¢çš„å®è·µï¼Œå¦ä¸€æ–¹é¢å‘¢ï¼Œä¹Ÿè€ƒè™‘äº†é›†ç¾¤èµ„æºç®¡ç†ä¸Šçš„ä¼˜åŠ¿ï¼Œæ¯”å¦‚èµ„æºéš”ç¦»æˆ–é™åˆ¶ï¼Œå› ä¸ºæœ‰çš„æ—¶å€™æµ‹è¯•æ˜¯ä¸å¤ªæ¸…æ¥šè‡ªå·±éœ€è¦å¤šå°‘èµ„æºçš„ï¼Œä¸åŠ é™åˆ¶çš„è¯æœ‰çš„æ—¶å€™ä¼šå ç”¨æ¯”è¾ƒå¤šèµ„æºï¼Œè¿˜æœ‰å°±æ˜¯ä»»åŠ¡çŠ¶æ€ã€æ—¥å¿—çš„æ”¶é›†è¿˜æœ‰å°±æ˜¯æˆ‘å‰é¢æåˆ°çš„ä¸€äº›é›†ç¾¤çš„ç‰¹æ€§ã€‚ ","date":"2021-04-13","objectID":"/posts/2021/04/13/building-a-distributed-pressure-testing-system-based-on-kubernetes/:0:7","tags":["tech","cloud native"],"title":"è”æå¾®è¯¾åŸºäº kubernetes æ­å»ºåˆ†å¸ƒå¼å‹æµ‹ç³»ç»Ÿ","uri":"/posts/2021/04/13/building-a-distributed-pressure-testing-system-based-on-kubernetes/"},{"categories":["Tech"],"content":" å¯¼è¯­ æœ¬æ–‡æ•´ç†è‡ªåˆæ‹äº‘ä¸¾åŠçš„å¾®æœåŠ¡æ¶æ„è®¾è®¡ä¸å®è·µï½œOpen Talk çº¿ä¸Šå…¬å¼€è¯¾ï¼Œè”æå¾®è¯¾åŸºç¡€æ¶æ„è´Ÿè´£äººç‹è¯šå¼ºåšçš„é¢˜ä¸ºã€Šè”æå¾®è¯¾åŸºç¡€æ¶æ„çš„æ¼”è¿›ä¸å®è·µ ã€‹ çš„åˆ†äº«ã€‚æœ¬æ¬¡æ´»åŠ¨è¿˜é‚€è¯·äº†Apache APISIX å’Œåˆæ‹äº‘ç­‰ä¼ä¸šçš„æŠ€æœ¯ä¸“å®¶åˆ†äº« APIã€Service Mesh ç­‰ç›¸å…³å®æˆ˜ç»éªŒã€‚ è¿‘å‡ å¹´ï¼Œäº‘åŸç”ŸæŠ€æœ¯å’Œç†å¿µå¾—åˆ°å¹¿æ³›æ¥å—ï¼Œä¼—å¤šä¼ä¸šå¼€å§‹æ¢ç´¢äº‘åŸç”Ÿæ¶æ„è½¬å‹è½åœ°ã€‚æœ¬æ–‡å°†ä¼šè¯¦ç»†è®²è¿°è”æå¾®è¯¾æ˜¯å¦‚ä½•åšäº‘åŸç”Ÿä¸‹çš„å¾®æœåŠ¡åŸºç¡€æ¶æ„è®¾è®¡ã€‚ ç‹è¯šå¼ºï¼Œè”æå¾®è¯¾åŸºç¡€æ¶æ„è´Ÿè´£äººã€‚ä¸»è¦ä»äº‹åŸºç¡€æŠ€æœ¯ç ”ç©¶å¼€å‘ã€åŸºäºäº‘åŸç”Ÿçš„åŸºç¡€æ¶æ„è®¾è®¡ä»¥åŠåŸºç¡€æ¶æ„å›¢é˜Ÿçš„ç®¡ç†å»ºè®¾ã€‚è‡´åŠ›äºäº‘åŸç”Ÿç†å¿µä¸‹ï¼Œä»¥å¾®æœåŠ¡æ­å»ºä¸­å°ã€‚ ","date":"2020-09-11","objectID":"/posts/2020/09/11/the-evolution-and-practice-of-tenclass-infrastructure/:0:0","tags":["tech","cloud native"],"title":"è”æå¾®è¯¾åŸºç¡€æ¶æ„çš„æ¼”è¿›ä¸å®è·µ","uri":"/posts/2020/09/11/the-evolution-and-practice-of-tenclass-infrastructure/"},{"categories":["Tech"],"content":"äº‘åŸç”Ÿï¼šæœªæ¥æ¶æ„çš„æ¼”åŒ–æ–¹å‘ äº‘åŸç”Ÿï¼ˆCloud Nativeï¼‰æ˜¯æœªæ¥æ¶æ„çš„æ¼”åŒ–æ–¹å‘ï¼ŒåŒ…å«äº†ä¸€ç»„åº”ç”¨æ¨¡å¼ï¼Œç”¨äºå¸®åŠ©ä¼ä¸šå¿«é€Ÿã€æŒç»­ã€å¯é ã€è§„æ¨¡åŒ–åœ°äº¤ä»˜ä¸šåŠ¡è½¯ä»¶ï¼Œç”±å¾®æœåŠ¡æ¶æ„ã€DevOps å’Œä»¥å®¹å™¨ä¸ºä»£è¡¨çš„æ•æ·åŸºç¡€æ¶æ„ç»„æˆï¼Œå…¶ä¸­åŒ…å«å¾ˆå¤šæœ‰åˆ©äºæˆ‘ä»¬åšæ›´å¤šæ‰©å±•æŒç»­æ¼”è¿›çš„ç†å¿µã€‚æˆ‘è®¤ä¸ºäº‘åŸç”Ÿæ˜¯ä¸€ç§æ–‡åŒ–ã€ä¸€ç§ç†å¿µï¼Œ ä¹Ÿæ˜¯ä¸€ç§ç”Ÿæ€ï¼Œæ—¢åŒ…æ‹¬æŠ€æœ¯ï¼ˆå¾®æœåŠ¡ã€æ•æ·åŸºç¡€è®¾æ–½ K8Sï¼‰ï¼Œä¹ŸåŒ…æ‹¬ç®¡ç†ï¼ˆDevOpsã€æŒç»­äº¤ä»˜ï¼‰ï¼Œ èŒƒå›´æå…¶å¹¿æ³›ï¼Œæ€»å¾—æ¥è®²æ˜¯ä¸€ç§å›´ç»•äº‘è®¡ç®—æ—¶ä»£çš„æ¶æ„ã€‚ è™½è¯´å‡ºç°å¾—ç›¸å¯¹æ¯”æ—©æœŸçš„ Spring Cloud è¦æ™šä¸€äº›ï¼Œä½†ä¹Ÿæ˜¯éå¸¸å…ˆè¿›çš„ï¼Œåƒè°·æ­Œæœ€æ—©æœŸè´¡çŒ®å‡ºæ¥çš„ K8Sï¼Œä¹‹åå„å¤§å…¬å¸ä¹Ÿéƒ½æ˜¯åœ¨è¿™ä¸ªå¼€æºé¡¹ç›®ä¸Šä¸æ–­å»è¿­ä»£æ›´æ–°ï¼Œå› æ­¤å®ƒçš„ç”Ÿæ€å¾ˆå®Œå–„ã€‚ä¸‹å›¾ä¸­å®Œæ•´çš„å±•ç¤ºäº†äº‘åŸç”Ÿçš„æ•´ä¸ªç”Ÿæ€ï¼ŒåŒ…æ‹¬äº†å¾ˆå¤šä¸åŒçš„ç¯èŠ‚ï¼Œæ¯”å¦‚æ•°æ®åº“ï¼Œè¿˜æœ‰æ¶ˆæ¯æµï¼Œç½‘å…³ã€æœåŠ¡ç½‘æ ¼ç­‰ç­‰ï¼Œè¿™é‡Œå°±ä¸å†ä¸€ä¸€åˆ—ä¸¾äº†ï¼Œå¤§å®¶æœ‰å…´è¶£å¯ä»¥å»æ·±å…¥äº†è§£ã€‚é™„CNCFå…¨æ™¯å›¾ï¼š ","date":"2020-09-11","objectID":"/posts/2020/09/11/the-evolution-and-practice-of-tenclass-infrastructure/:0:1","tags":["tech","cloud native"],"title":"è”æå¾®è¯¾åŸºç¡€æ¶æ„çš„æ¼”è¿›ä¸å®è·µ","uri":"/posts/2020/09/11/the-evolution-and-practice-of-tenclass-infrastructure/"},{"categories":["Tech"],"content":"äº‘åŸç”Ÿçš„æ¼”è¿›å†ç¨‹ 2001å¹´è™šæ‹Ÿæœºè¿›å…¥åˆ°äº†ä¸€ä¸ªå¯å•†ç”¨çš„é˜¶æ®µï¼Œ 2013 å¹´ Docker å‘å¸ƒåä¼šå‘ç°å¾ˆå¤šå¼€æºé¡¹ç›®ã€ä¸ªäººå¼€å‘è€…éƒ½å¼€å§‹ç”¨Dockerå»å‘å¸ƒè‡ªå·±çš„åº”ç”¨ï¼›2015å¹´CNCFï¼ˆäº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼šï¼‰æˆç«‹ï¼Œ2018 å¹´ Kubernetes ä» CNCF æ¯•ä¸šï¼Œåˆ°äº† 2019 å¹´æˆ‘ä»¬ä¼šå‘ç°å®ƒå·²æ˜¯å¤§å®¶æ—¶å¸¸è°ˆè®ºçš„çƒ­ç‚¹ã€‚äº‘åŸç”Ÿå¼€å§‹å¤§çƒ­ï¼Œå› ä¸ºå®ƒå·²ç»å½¢æˆäº†ä¸€ä¸ªæ¯”è¾ƒæˆç†Ÿçš„ä½“ç³»ï¼Œå„å¤§äº‘å‚å•†ä¹Ÿå¼€å§‹æŠŠè‡ªå·±çš„äº‘æœåŠ¡ã€å®¹å™¨æœåŠ¡ç­‰å¼€å§‹æ¨å‘å¸‚åœºï¼Œè¿™æ—¶å¤§å®¶ä¹Ÿä¸ç”¨ä»é›¶å¼€å§‹è‡ªå»ºï¼Œè¿™ä¹Ÿå‘Šè¯‰æˆ‘ä»¬è¦å»æŠŠæ¡æŠ€æœ¯å‘å±•çš„è¶‹åŠ¿ï¼Œæ‡‚å¾—å€ŸåŠ¿ï¼Œè€Œä¸æ˜¯ä»€ä¹ˆéƒ½æ˜¯ä»é›¶å¼€å§‹ã€‚ ","date":"2020-09-11","objectID":"/posts/2020/09/11/the-evolution-and-practice-of-tenclass-infrastructure/:0:2","tags":["tech","cloud native"],"title":"è”æå¾®è¯¾åŸºç¡€æ¶æ„çš„æ¼”è¿›ä¸å®è·µ","uri":"/posts/2020/09/11/the-evolution-and-practice-of-tenclass-infrastructure/"},{"categories":["Tech"],"content":"è”æå¾®è¯¾æ¶æ„çš„æ¼”è¿›å†ç¨‹ ä¸Šå¤æ—¶æœŸï¼šå•ä½“æ¶æ„ï¼Œä¸šåŠ¡ä¼˜å…ˆ æ‰€è°“çš„ä¸Šå¤æ—¶æœŸå¯ä»¥ç†è§£æˆå…¬å¸çš„åˆ›å§‹æ—¶æœŸï¼Œè¿™æ—¶ä¼˜å…ˆä»¥ä¸šåŠ¡ä¸ºä¸»ï¼Œå¦‚æœè¿ä¸šåŠ¡éƒ½æ²¡èµ·æ¥åˆè°ˆä½•å»åšæ›´å¤šçš„æŠ€æœ¯å‘å±•ï¼Œè¿™ä¸ªé˜¶æ®µå¯èƒ½ä½¿ç”¨å•ä½“æ¶æ„æ›´å®¹æ˜“åšåˆ°è¿­ä»£ã€‚ä¸è¿‡å®ƒçš„ä¼˜ç‚¹æ˜¯ä¸šåŠ¡èµ·æ­¥å¿«ï¼Œä¸€ä¸ªäººå•æªåŒ¹é©¬å°±å¯ä»¥æŠŠæ•´ä¸ªé¡¹ç›®ç»™å»ºèµ·æ¥äº†ï¼Œå¯èƒ½å°±é‚£ä¹ˆä¸€ä¸¤ä¸ªæœåŠ¡ï¼Œå®ƒçš„éƒ¨ç½²ç»´æŠ¤ä¹Ÿè¦ç®€å•å¾ˆå¤šï¼Œç›®çš„å°±æ˜¯å…ˆæŠŠä¸šåŠ¡åšèµ·æ¥ã€‚ å•ä½“æ¶æ„çš„ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œä¸€ä¸ªå•ä½“é¡¹ç›®åŠŸèƒ½å¤ªå¤šï¼Œæ–°äººå°±ä¸æ˜“ä¸Šæ‰‹ï¼Œé¡¹ç›®è¶Šåšè¶Šå¤æ‚ï¼Œè€¦åˆåº¦è¶Šæ¥è¶Šé«˜ï¼Œä¼šç»™åæœŸæ–°è¿›äººå‘˜å¸¦æ¥å¾ˆå¤šéš¾é¢˜ï¼Œæˆ‘ä»¬ç§ä¸‹ç§°ä¹‹ä¸ºâ€œæ­»ä¼¤â€ï¼Œä¸åˆ©äºæ‰©å±•æ–°åŠŸèƒ½ã€‚å…¶ä¸­æœ€éº»çƒ¦çš„æ˜¯åé¢çš„æ–°äººè¦å»æ¥æ‰‹å¹¶å¼€å±•æ–°åŠŸèƒ½ï¼Œå¦‚æœä»£ç è´¨é‡æœ‰é—®é¢˜ï¼Œå¯èƒ½ä¸€ä¸ªå±€éƒ¨ BUG å°±ä¼šå½±å“åˆ°æ•´ä½“ã€‚è€Œä¸”æœ‰å¾ˆå¤šå·²ç»å®Œæˆçš„åŠŸèƒ½ï¼Œä¼šé‡å¤ä½¿ç”¨åˆ°æ–°çš„ä¸šåŠ¡ä¸­ï¼Œæ¯”å¦‚æ”¯ä»˜ã€è´¦å·ç­‰è¿™äº›åŒæ ·çš„åŠŸèƒ½ï¼Œéš¾é“åˆè¦é‡æ–°åšä¸€éå—ï¼Ÿ ä¸è¿‡ä¸Šå¤æ—¶æœŸçš„æ•´ä½“æ¶æ„ä¹Ÿä¸ä¸€å®šåªæœ‰ä¸€ä¸ªæœåŠ¡å™¨ã€ä¸€ä¸ªæœåŠ¡ï¼Œä¹Ÿæ˜¯æœ‰ä¸€äº›ä¼¸ç¼©æ€§çš„ã€‚ä¸Šå›¾ä¸­çš„Usersã€Threadsã€Posts æ„æˆäº†æ•´ä¸ªå•ä½“ç»“æ„çš„åº”ç”¨ï¼Œå®ƒæ˜¯å¯å¤åˆ¶çš„ï¼Œæ¯”å¦‚åœ¨è´Ÿè½½å‡è¡¡ä¸‹é¢æŒ‚å¤šä¸ªã€‚å¦å¤–å®ƒæ˜¯æ— çŠ¶æ€çš„ï¼Œæ‰€è°“æ— çŠ¶æ€æ˜¯æŒ‡ä¸ä¼šå› ä¸ºå¤šä¸€å°æœåŠ¡ä¼¸ç¼©å‡ºæ¥è€Œå¯¼è‡´æœåŠ¡ä¸å¯ç”¨ï¼Œå…¶ä¸­éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ä¸€äº›éœ€è¦è®¾ç½®ç™½åå•çš„ï¼Œæ¯”å¦‚ IP ç™½åå•ï¼Œå¤šä¸€å°æœºå™¨ï¼Œå¯èƒ½ IP å°±å¯¹ä¸ä¸Šäº†ï¼Œä¼šå¯¼è‡´å…¶ä»–çš„ç¯èŠ‚æŠ¥é”™ã€‚ä¸è¿‡è¿™å¯ä»¥é€šè¿‡ä¸€äº›è½¯ä»¶è®¾è®¡çš„æ–¹æ³•ï¼Œæ¯”å¦‚ä»£ç†ã€ç”Ÿäº§æ¶ˆè´¹è¿™ç§æ¨¡å¼å»å¤„ç†ã€‚ åˆæœŸï¼šåˆæ­¥å¾®æœåŠ¡ï¼Œè§£è€¦åŒ– åˆæœŸé˜¶æ®µå•ä½“ç»“æ„ä¼šå˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œç»´æŠ¤èµ·æ¥ä¹Ÿä¼šè¶Šæ¥è¶Šéš¾ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œä¸€ä¸ªç³»ç»Ÿé‡Œé¢å¯èƒ½æœ‰å‡ åç”šè‡³ä¸Šç™¾ä¸ªä¸åŒçš„æ¨¡å—ï¼Œä¸åŒçš„æ–‡ä»¶å¤¹ï¼Œä¸€ä¸ªæ–°äººçœ‹å®Œè¿™äº›ä»£ç éƒ½éœ€è¦èŠ±å¾ˆå¤šçš„æ—¶é—´ï¼Œåˆè°ˆä½•äº†è§£æ•´ä½“å¹¶åšç»´æŠ¤å‘¢ï¼Ÿç”šè‡³æ•´ä¸ªè¦è·‘èµ·æ¥æ‰€è¦äº†è§£çš„çŸ¥è¯†ä¹Ÿå¾ˆå¤šã€‚å› æ­¤åé¢å°±éœ€è¦ä¼šåšè§£è€¦åŒ–ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„åˆæ­¥å¾®æœåŠ¡åŒ–ã€‚ä¸è¿‡åˆæœŸè¿˜æ˜¯ç”±ä¸šåŠ¡æ¥æ¨åŠ¨çš„ï¼Œè¿™ä¸ªæ—¶å€™çš„ç›®æ ‡è¿˜æ˜¯æ‹“å±•ä¸åŒçš„é¡¹ç›®ï¼Œè§£è€¦çš„è¯ä¹Ÿä¸ä¼šä¸€æ­¥å°±åˆ°å®¹å™¨åŒ–ã€‚è¯¥é˜¶æ®µéœ€è¦å…ˆå¯¹æœåŠ¡åšæ¾è€¦åˆï¼Œæ–¹ä¾¿æ–°äººè¿›æ¥åå»ç»´æŠ¤ä»£ç ï¼Œå¦å¤–å°±æ˜¯åšå¾ˆå¤šåƒç›‘æ§è¿™ç±»å…œåº•çš„èƒ½åŠ›ã€‚ è¯´åˆ°æœåŠ¡åšæ¾è€¦åˆï¼ˆè§£è€¦ï¼‰ï¼Œå› ä¸ºæ—©æœŸæ²¡æœ‰å¾ˆå¥½çš„ç»Ÿç­¹ï¼Œå¾ˆå¤šåº”ç”¨æ˜¯è§£è€¦äº†ï¼Œä½†å®ƒçš„æŠ€æœ¯æ ˆå¤šè€Œæ‚ï¼Œç”šè‡³è¿éƒ¨ç½²æ–¹å¼ä¹Ÿéƒ½ä¸ä¸€æ ·ï¼Œå¦‚æœæ˜¯åŸæ¥ç»´æŠ¤é¡¹ç›®çš„å¼€å‘äººå‘˜èµ°äº†ï¼Œç”±ä½ æ¥æ¥æ‰‹ï¼Œå®ƒçš„è¯­è¨€ã€æ¡†æ¶ã€éƒ¨ç½²æ–¹å¼éƒ½ä¸åŒï¼Œç»´æŠ¤å·¥ä½œä¼šå¾ˆéš¾è¿›è¡Œã€‚æ‹†åˆ†åä¹Ÿä¼šé¢ä¸´åˆ°æœåŠ¡å…³ç³»é—®é¢˜ï¼ŒæœåŠ¡å°‘çš„æ—¶å€™è¿˜èƒ½æ˜ç¡®æœåŠ¡ä¹‹é—´çš„è°ƒç”¨å…³ç³»ï¼Œå½“æœåŠ¡å¤šäº†åï¼Œè°ƒç”¨å…³ç³»å°±ä¼šæ¯”è¾ƒä¹±ï¼Œç‰¹åˆ«æ˜¯ä¸ºäº†æ–¹ä¾¿è°ƒç”¨ï¼Œå¿«é€Ÿä¸Šçº¿å°†é…ç½®è·Ÿä»£ç æ··åˆä¸€èµ·çš„æƒ…å†µï¼Œè¿™æ ·æ‹†åˆ†ååè€Œä¼šå¸¦æ¥æ›´å¤šéº»çƒ¦ã€‚å› æ­¤ä¸Šå¤æ—¶æœŸä»¥ä¸šåŠ¡ä¸ºä¸»ï¼Œéœ€è¦è¡¡é‡ä¸€ä¸‹æ˜¯å¦æ‹†åˆ†ï¼Œä¸šåŠ¡æœ‰æ²¡æœ‰è¿™ä¸ªéœ€æ±‚ï¼Œä¸èƒ½å› ä¸ºåšæ‹†åˆ†è€Œå½±å“ä¸šåŠ¡ï¼Œå¦ä¸€ä¸ªæ˜¯å¦‚æœäººå‘˜ä¸å¤Ÿä¹Ÿä¸é€‚åˆå»åšæ‹†åˆ†ï¼Œç»´æŠ¤èµ·æ¥ä¼šæ›´éº»çƒ¦ã€‚ æ•´ä½“å¼æ¶æ„æ‹†åˆ†å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè¿™é‡Œå†™åˆ°æ˜¯ Container Portsï¼Œä¸ä»¥å‰ç›¸æ¯”æ›´ç†æƒ³åŒ–äº†ä¸€äº›ï¼Œéœ€è¦å…ˆè¿›è¡Œå®¹å™¨åŒ–ï¼Œæ‹†åˆ†ä¹‹åå°† Users æœåŠ¡ã€Threads æœåŠ¡ã€Posts æœåŠ¡åˆ†åˆ«å¯¹åº”ä¸åŒçš„ API å…¥å£ï¼Œåˆ†åˆ«å»æ‰©å±•ä¼šæ›´åˆ©äºå»ç»´æŠ¤ã€‚æ¯”å¦‚è´Ÿè´£ Posts å¼€å‘çš„ï¼Œå°±åªéœ€ä¸“æ³¨äºè¿™ä¸€å—ã€‚ é¢†åŸŸé©±åŠ¨è®¾è®¡ä¸å¾®æœåŠ¡ æ‹†åˆ†ä¸­æœ‰ä¸€ä¸ªè¯å«é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDomain-Driven Designï¼Œç®€ç§° DDDï¼‰ï¼Œæ˜¯ä¸€ç§ç”±åŸŸæ¨¡å‹æ¥é©±åŠ¨ç³»ç»Ÿè®¾è®¡çš„æ€æƒ³ï¼Œæœ€æ—©å‰çš„è¿˜æ˜¯é€šè¿‡æ•°æ®åº“ç­‰æ•°æ®æºæ¥é©±åŠ¨ç³»ç»Ÿè®¾è®¡ ï¼ˆModel-Driven Designï¼Œç®€ç§° MDDï¼‰ã€‚é¢†åŸŸé©±åŠ¨åˆ™ä¼šåˆ’åˆ†ä¸šåŠ¡å’ŒåŠŸèƒ½ï¼Œæ¯”å¦‚è¯´æ”¯ä»˜ã€è®¢å•æˆ–è€…æ˜¯ç”¨æˆ·ç­‰ï¼Œæ‹†åˆ†åçš„å¯å¤ç”¨æ€§å°±æ›´å¼ºäº†ï¼Œç›¸äº’è°ƒç”¨å°±å¯ä»¥ã€‚é¢†åŸŸæ¨¡å‹æ˜¯å¯¹ä¸šåŠ¡æ¨¡å‹çš„æŠ½è±¡ï¼Œé¢†åŸŸé©±åŠ¨è®¾è®¡ç›¸å¯¹æ¯”è¾ƒå¤æ‚ï¼Œæœ‰å…´è¶£çš„å¯ä»¥å»æ·±å…¥äº†è§£ï¼Œæ€»çš„æ¥è¯´è§„åˆ’è®¾è®¡ä¸æ˜¯ä¸€æˆä¸å˜çš„ï¼ŒæŒ‰è‡ªå·±æœ€é€‚åˆçš„æ¥å°±å¥½äº†ã€‚ æ‹†åˆ†åä¹Ÿä¼šé¢ä¸´ä¸€äº›é—®é¢˜ï¼Œå› ä¸ºæœåŠ¡å˜å¤šäº†ï¼Œéƒ¨ç½²ã€ç®¡ç†ã€èµ„æºè§„åˆ’ä¼šç‰¹åˆ«éº»çƒ¦ï¼ŒæœŸæœ›æ¯ä¸€ä¸ªå¾®æœåŠ¡æœ‰è‡ªå·±çš„ä¸“ç”¨æ•°æ®åº“ï¼Œå‰é¢è¯´åˆ°äº†è¦è¡¡é‡æ˜¯å¦æ‹†åˆ†ï¼Œè§„æ¨¡å¾ˆå°çš„è¯åšè¿™ä¸ªæ˜¯å¾—ä¸å¿å¤±çš„ï¼Œåº”è¯¥å…ˆæŠŠé‡åšèµ·æ¥ï¼Œæ¯”å¦‚å•è¡¨è¿‡äº¿ã€è¶…å¤§é‡äº†ï¼Œå¯¹æ•°æ®åº“åšç»„æˆã€åªè¯»ã€è¯»å†™åˆ†ç¦»ã€åˆ†è¡¨éƒ½æ²¡æœ‰ç”¨çš„æ—¶å€™å†å»è€ƒè™‘åˆ†åº“ã€‚è€Œä¸”æ‹†åˆ†ä¹‹åä½¿ç”¨äº†ä¸“ç”¨æ•°æ®åº“ï¼Œå®ƒä»¬ä¹‹é—´çš„è°ƒç”¨ä¼šæ˜¯ä¸ªéº»çƒ¦ï¼Œç‰¹åˆ«æ˜¯åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œä¸‹é¢ä¼šå†è¯¦ç»†è®²è§£ã€‚ ä¸­æœŸï¼šæ·±æ°´æœŸæ”¹é©ï¼Œå®ç°é›†ç¾¤åŒ– ä¸­æœŸæ˜¯é›†ç¾¤åŒ–çš„è¿‡ç¨‹ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯å®¹å™¨åŒ–ã€‚æˆ‘ä¸ªäººè®¤ä¸ºåœ¨å½“æ—¶çš„æ—¶é—´èŠ‚ç‚¹ä¸Šï¼Œé¡ºåºå¯èƒ½æ˜¯åäº†ï¼Œåº”è¯¥æ˜¯å®¹å™¨åŒ–åšå¾—è¶Šæ—©è¶Šå¥½ï¼Œè¿™æ ·è§£è€¦çš„æ—¶å€™ä¼šå‡å°‘å¾ˆå¤šä¸å¿…è¦çš„éº»çƒ¦ï¼Œå½“ç„¶è¿™ä¸ªä¹Ÿè·Ÿå†å²æ—¶é—´çš„è¶‹åŠ¿æœ‰å…³ç³»ï¼Œå¯èƒ½ä¹‹å‰æ²¡æœ‰å…´è¶£ï¼Œå¤§å®¶è§‰å¾—è¿™ä¸ªæŠ€æœ¯ä¸æˆç†Ÿï¼Œä¸æ•¢ç”¨ï¼Œå› æ­¤è¿˜æ˜¯æŒ‰è€çš„æ–¹å¼è§£è€¦ã€‚ä½†å¦‚æœæ˜¯ç°åœ¨è¿˜æœªå¼€å±•è¿™äº›å·¥ä½œï¼Œéœ€è¦ä¹‹åå†å»åšçš„ï¼Œæ˜¯å¯ä»¥æŠŠå®¹å™¨åŒ–æå‰ä¸€äº›çš„ã€‚ å¯¹æˆ‘ä»¬è€Œè¨€ï¼Œä¸­æœŸè¦åšçš„æ˜¯è¦æŠŠåˆæ­¥å¾®æœåŠ¡åŒ–è¿‡ç¨‹ä¸­å­˜åœ¨çš„ä¸€äº›é—®é¢˜çº æ­£è¿‡æ¥ï¼Œéœ€è¦ç»Ÿä¸€é…ç½®ä¸­å¿ƒï¼Œåˆ†ç¦»ä»£ç å’Œé…ç½®ï¼›ç»Ÿä¸€å¼€å‘æµ‹è¯•æµç¨‹ï¼Œç»Ÿä¸€æŒç»­é›†æˆæŒç»­éƒ¨ç½²æ–¹å¼ï¼Œåšå®¹å™¨åŒ–ã€é›†ç¾¤åŒ–æ”¹é€ ï¼Œæä¾›æ›´ä¸ºå…¨é¢çš„ç›‘æ§å‘Šè­¦ä½“ç³»ã€‚è™½ç„¶åœ¨åˆæœŸå¾®æœåŠ¡åŒ–æ—¶ä¹Ÿåšäº†ä¸€äº›ç›‘æ§æ–¹é¢çš„å·¥ä½œï¼Œä½†æ—¢ç„¶è¿›åˆ°äº†äº‘åŸç”Ÿï¼Œç›¸æ¯”åœ¨å•å°çš„ vm æœºä¸Šåšç›‘æ§ï¼Œå½¢å¼ä¼šä¸å¤ªä¸€æ ·ï¼Œä½†æ˜¯ç†å¿µéƒ½æ˜¯ç›¸é€šçš„ï¼Œéœ€è¦å‡çº§åˆ°æ›´é€‚åˆé›†ç¾¤åŒ–ä¸Šçš„ç›‘æ§å‘Šè­¦èƒ½åŠ›ã€‚ æ”¹é©éƒ½æ˜¯å‘äº‘åŸç”Ÿé æ‹¢çš„ï¼Œå…·ä½“æªæ–½åœ¨äºåˆæ­¥å¾®æœåŠ¡åŒ–åï¼Œé€šè¿‡å¼•å…¥K8Sä»¥è§£å†³æœåŠ¡ç®¡ç†ã€èµ„æºç®¡ç†é—®é¢˜ï¼Œå¹¶è¿›å…¥äº‘åŸç”Ÿç”Ÿæ€ï¼Œè¿™æ ·å¾ˆå¤šä¸œè¥¿éƒ½èƒ½ç”¨èµ·æ¥ï¼Œé¿å…é‡å¤å»ºè®¾ï¼›å¼•å…¥ DevOps è§£å†³è‡ªåŠ¨åŒ–æµç¨‹é—®é¢˜ï¼ŒåŒ…æ‹¬è‡ªåŠ¨æµ‹è¯•ã€ä»£ç è´¨é‡è¯„ä¼°ã€æ„å»ºã€éƒ¨ç½²ç­‰ï¼›å¼•å…¥Istioè§£å†³ç½‘å…³å’ŒæœåŠ¡æ²»ç†é—®é¢˜ã€‚ å½“ç„¶ä¸Šè¿°è¿™äº›æ”¹é©å¯ä»¥æ ¹æ®è‡ªå·±çš„æƒ…å†µå»é€‚é…ï¼Œä¸è¿‡ä¹Ÿä¼šé¢ä¸´ä¸€äº›é—®é¢˜ã€‚æˆ‘ä»¬ä¸ä»…è¦ç€çœ¼äºè½¯ä»¶æ¶æ„ï¼Œè¿˜éœ€è¦æœ‰æ›´å¤šåŸºç¡€æ¶æ„çš„è§†é‡ï¼Œæœ‰äº›é—®é¢˜éœ€è¦åŸºç¡€æ¶æ„çš„èƒ½åŠ›å»è§£å†³ï¼Œåˆæˆ–æ˜¯è½¯ä»¶æ¶æ„èƒ½è§£å†³ä½†å®ç°èµ·æ¥ç‰¹åˆ«å¤æ‚çš„ï¼Œè¿™æ—¶äº¤ç»™åŸºç¡€æ¶æ„å»åšä¼šç®€å•å¾ˆå¤šã€‚å¦å¤–ï¼Œè®¾è®¡å¦‚æ­¤å¤šçš„æ”¹é€ ã€å˜æ›´å¼€å‘è®¾æ–½æµç¨‹éœ€è¦æ›´å¤šçš„è·¨éƒ¨é—¨æ²Ÿé€šä¸èµ„æºï¼Œé€ æˆæˆæœ¬å¢åŠ ï¼›æ”¹é€ åä¹Ÿä¼šå¸¦æ¥ä¸€äº›é£é™©ï¼Œéœ€è¦æ£€æµ‹è¯„ä¼°å‡ºå°å…œåº•æ–¹æ¡ˆã€‚æ­¤å¤–ï¼Œæ”¹é€ ä¸­è¦ç”¨åˆ°å¾ˆå¤šæ–°çš„ä¸œè¥¿ï¼Œéœ€è¦æˆ‘ä»¬æŒç»­ä¸æ–­çš„å­¦ä¹ å»æ±²å–çŸ¥è¯†æ‰èƒ½ä¸€ç›´å¾€å‰èµ°ã€‚ äº‘åŸç”Ÿåº”ç”¨ä¸ä¼ ç»Ÿåº”ç”¨çš„åŒºåˆ« äº‘åŸç”Ÿåœ¨ä¸€ä¸ªæ›´å¥½çš„åŸºç¡€å¹³å°ä¸è®¾æ–½ä¸Šæä¾›äº†æ›´å¤šçš„åº”ç”¨ã€‚å› ä¸ºåšäº†å®¹å™¨åŒ–å°±ä¸éœ€è¦æŒ‡å®šæ“ä½œç³»ç»Ÿï¼ŒK8S çš„èµ„æºè°ƒåº¦æ›´æœ‰å¼¹æ€§ï¼Œä¹‹å‰éœ€è¦é€šè¿‡ä»£ç æ¥åè°ƒå®ç°ä¼¸ç¼©ç­–ç•¥ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œå€ŸåŠ©DevOps ä¼šå®¹æ˜“è¾¾æˆåä½œï¼Œå› ä¸ºå®ƒæ•´ä¸ªæµç¨‹éƒ½æ˜¯è‡ªåŠ¨çš„ï¼Œèƒ½å¤Ÿæ•æ·å¼€å‘ã€‚è¿˜æœ‰å¾®æœæ˜¯éƒ½æ˜¯å„è‡ªç‹¬ç«‹çš„ï¼Œå…·æœ‰é«˜å†…èšã€ä½è€¦åˆçš„åŸåˆ™ï¼Œå…·æœ‰è‡ªåŠ¨åŒ–è¿ç»´ã€å¿«é€Ÿæ¢å¤çš„ç‰¹ç‚¹ï¼Œè‡ªæ„ˆèƒ½åŠ›å¼ºã€‚å½“é›†ç¾¤å®•æ‰äº†ï¼Œå®ƒä¼šè‡ªåŠ¨æ‹‰èµ·ï¼Œæ¯”å¦‚ä¹‹å‰æ·±å¤œä¸šåŠ¡æ•…éšœå¯èƒ½éœ€è¦å®šä½åˆ°å“ªä¸ªæœåŠ¡å®•æ‰äº†ï¼Œå†é‡æ–°å¯åŠ¨èµ·æ¥ï¼Œç°åœ¨å°±ä¸ç”¨è¿™ä¹ˆéº»çƒ¦ï¼Œå®ƒä¼šè‡ªåŠ¨é‡æ–°æŒ‚èµ·ï¼Œç”¨æˆ·ç”šè‡³éƒ½ä¸ä¼šæ„ŸçŸ¥ã€‚ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒåŸæœ‰æ¶æ„æ˜¯æ²¡æœ‰é›†ç¾¤åŒ–çš„ï¼Œæ¯”è¾ƒä¹±ï¼›æ–°æ¶æ„åšäº†é›†ç¾¤åŒ–ï¼Œç”šè‡³æ˜¯åšäº†ç½‘ç»œéš”ç¦»ã€‚è¯´èµ·ç½‘ç»œéš”ç¦»ï¼Œæœ‰äº›å…¬å¸å¯èƒ½è§‰å¾—æ²¡å¿…è¦ï¼Œå½“æµ‹è¯•ç¯å¢ƒè·Ÿç”Ÿäº§ç¯å¢ƒåœ¨åŒä¸€ä¸ªç½‘ç»œï¼Œä¼šå¼•å…¥ä¸€äº›ä¸ç¡®å®šçš„å› ç´ ï¼Œå¦‚æœæ˜¯ä¸Šé¢çš„åº”ç”¨å‡ºç°æ¼æ´ï¼Œæœ‰å¯èƒ½ä¼šè¢«æŒ–çŸ¿ï¼Œç”šè‡³å½±å“åˆ°ç”Ÿäº§ç¯å¢ƒï¼Œè€Œç½‘ç»œéš”ç¦»èƒ½æœ‰æ•ˆçš„é˜²æ­¢è¿™ç§æƒ…å†µã€‚æ–°æ¶æ„çš„ä¼˜åŠ¿åœ¨äºé€šè¿‡é›†ç¾¤åŒ–çš„è¿‡ç¨‹å¯ä»¥å®ç°æœ‰åºç®¡ç†ã€å®‰å…¨éš”ç¦»ï¼ŒåŠŸèƒ½ä¹Ÿæ›´å¼ºå¤§ï¼Œåƒä¸Šé¢è¯´åˆ°çš„è‡ªæ„ˆã€èµ„æºç¼–æ’ç­‰ï¼Œç”Ÿæ€ä¹Ÿæ›´åŠ å¥½äº†ã€‚å½“ç„¶æˆ‘ä»¬ä¸ä»…æ˜¯å…³æ³¨å¤–éƒ¨æœåŠ¡ï¼Œå…¶ä»–äº‘åŸç”Ÿä¸Šçš„åº”ç”¨å¯ä»¥ç›´æ¥é€šè¿‡ Helm ä¹‹ç±»çš„å»å®‰è£…ã€‚ å†æåˆ° DevOpsï¼Œè¿™æ˜¯é€šè¿‡ä¸åŒçš„ç¯èŠ‚å»å»ºè®¾çš„ï¼Œä»ç¼–ç åˆ°ä¸Šçº¿ç›‘æ§åšæœåŠ¡æ²»ç†ï¼Œéƒ½æ˜¯æŒ‰ä¸‹å›¾çš„æµç¨‹èµ°å®Œï¼Œåˆ°åé¢çš„èƒ½åŠ›ä¹Ÿè¶Šæ¥è¶Šå¼ºã€‚åœ¨ç¼–ç å¼€å‘ç¯èŠ‚ï¼Œå…³æ³¨çš„æ˜¯ä»£ç ä»“åº“ã€ä»£ç è´¨é‡ï¼Œåƒä»£ç è´¨é‡ç›‘æµ‹ï¼Œæ˜¯ä¹‹åä¸€æ­¥æ­¥å»å¾€ä¸ŠåŠ çš„ã€‚æµ‹è¯•ä¹Ÿæ˜¯ä¸€æ ·ï¼Œæœ€æ—©æ˜¯è‡ªå·±åšä¸€ä¸ªåŠŸèƒ½å»æµ‹è¯•ï¼Œåé¢åŠ äº†å¾ˆå¤šè‡ªåŠ¨åŒ–æµ‹è¯•çš„æ‰‹æ®µï¼Œæ¯”å¦‚å‹æµ‹ï¼Œå¯ä»¥ä¿è¯ä»£ç ä¸Šçº¿çš„è´¨é‡ã€‚ å¤§å®¶ä¹Ÿè®¸ä¼šè§‰å¾—ä¸Šçº¿ä¹‹å‰åŠ é‚£ä¹ˆå¤šç¯èŠ‚ï¼Œé‚£è¿­ä»£é€Ÿåº¦ä¸å°±å˜æ…¢äº†å—ï¼Ÿå…¶å®è¿™æ˜¯ä¸€ä¸ªé”™è¯¯çš„è®¤çŸ¥ï¼ŒçœŸæ­£ä¼šå˜æ…¢çš„æ˜¯ä»£ç è´¨é‡ä¸è¡Œï¼Œå¸¦ç€ BUG ä¸Šçº¿ï¼Œå‘ç°åå›æ»šç”šè‡³å¯èƒ½ä¼šç›´æ¥å¸¦æ¥æŸå¤±ã€‚è¿™è¦æ˜¯æ”¾åœ¨åœ¨ä»¥å‰çš„å·¥å‚ï¼Œè¿™ç§å«è¿”å·¥ã€å¬å›ï¼Œä¼šæ›´åŠ å½±å“æ•ˆç‡ï¼Œåªæœ‰æˆåŠŸçš„å‘å¸ƒæ‰ç®—æ˜¯æœ‰æ•ˆç‡çš„è¿­ä»£ã€‚ æ„å»ºç¯èŠ‚æœ€æ—©æ˜¯è‡ªå·±æŠŠæ–‡ä»¶ã€ä»£ç ã€ç¯å¢ƒä¾èµ–ç­‰æ‰“åŒ…å¥½ï¼Œä¼ åˆ°æœåŠ¡å™¨ï¼Œéœ€è¦ä¾èµ–æœåŠ¡å™¨çš„è‡ªå¯åŠ¨æ‰‹æ®µå»ç»´æŠ¤åº”ç”¨ã€‚åšäº†å®¹å™¨åŒ–åï¼Œé€šè¿‡å®¹å™¨é•œåƒï¼Œæ‰“åŒ…æˆé•œåƒï¼Œå®ƒçš„ç¯å¢ƒä¼šå¤„äºä¸€ä¸ªéš”ç¦»çš„çŠ¶æ€ï¼Œä¸æ˜“å—åˆ°å½±å“ï¼Œå†åˆ©ç”¨ DevOps çš„ pipline+K8S å»å‘å¸ƒã€‚ç¯å¢ƒåšäº†æ›´æ˜ç¡®åˆ‡åˆ†ï¼Œå‘å¸ƒå½¢å¼ä»æœ€æ—©çš„ç°åº¦åˆ°å¯ä»¥æ»šåŠ¨å‡çº§ã€‚ ç›‘æ§æ–¹é¢ï¼Œæœ€æ—©åªæœ‰æ—¥å¿—é‡‡é›†å’Œ statsd ç›‘æ§ï¼Œä¸Šäº†é›†ç¾¤åå°±æœ‰ prometheus å»æä¾›æ›´å¤šçš„ç›‘æ§ä¿¡æ¯ã€‚å‘Šè­¦ç¯èŠ‚ï¼Œä»æœ€æ—©çš„é‚®ä»¶åˆ°ä¼ä¸šå¾®ä¿¡ï¼Œç°åœ¨èƒ½æ›´ç›´æ¥åŠæ—¶åœ°æ”¶åˆ°äº‹ä»¶ä¿¡æ¯ï¼Œsentry æŠŠæŠ¥é”™æ”¶é›†è¿‡æ¥ï¼Œå°±å¯ä»¥åŠæ—¶å®šä½åˆ°é—®é¢˜ã€‚åˆ†æä¹Ÿæ˜¯è¿™æ ·ï¼Œå¦‚æœå¯¹æµç¨‹ä¸ç†Ÿæ‚‰ï¼Œå‡ºé—®é¢˜åæŸ¥æ‰¾å®šä½å¯èƒ½è¦èŠ±å¾ˆå¤šæ—¶é—´æ¥åˆ†æï¼Œè€Œç°åœ¨åšåˆ°äº†ä¸€é”®åˆ†æã€æ…¢æŸ¥è¯¢åˆ†æã€RDB åˆ†æï¼Œç”šè‡³ç›‘æ§æ›²çº¿æ›´æ™ºèƒ½çš„åˆ†æï¼Œå½“ç„¶ç°åœ¨äº‘å‚å•†å‡ºå”®çš„æœåŠ¡å™¨ä¹Ÿä¼šæä¾›è¿™äº›èƒ½åŠ›ã€‚ ä¸Šçº¿æ²»ç†ä¸­ï¼Œæœ€æ—©æ˜¯å½“å‘ç°æŸä¸ªæœåŠ¡æœ‰å¼‚å¸¸ï¼Œé™¤äº†åœ¨ LB è´Ÿè½½å‡è¡¡è°ƒæƒé‡ï¼Œæ²¡æœ‰å…¶ä»–æ›´å¥½çš„åŠæ³•ï¼Œåªèƒ½é€šè¿‡ä»£ç å‘ç‰ˆå»åšé™çº§ã€‚æœ‰æœåŠ¡æ²»ç†ä¹‹åï¼Œå°±å¯ä»¥åœ¨è¿™ä¸€å±‚åšåƒç†”æ–­ä¹‹ç±»çš„å¤„ç†ï¼Œä¾‹å¦‚æœ‰ K8S ä¹‹åï¼Œèµ„æºçš„è°ƒåº¦ã€ä¼¸ç¼©éƒ½æ›´è‡ªåŠ¨åŒ–äº†ï¼Œå†å¼•å…¥ Istio ã€é“¾è·¯è¿½è¸ªã€è®¿é—®æ§åˆ¶ç­‰å¯ä»¥å¾—åˆ°æ›´å¥½çš„åŠ å¼ºã€‚ åˆ†å¸ƒå¼äº‹åŠ¡ åˆ†å¸ƒå¼äº‹åŠ¡æ˜¯ç›¸å¯¹æœ¬åœ°äº‹åŠ¡è€Œè¨€çš„ï¼Œè€Œæ•°æ®åº“æœ¬åœ°äº‹åŠ¡æœ‰Aï¼ˆåŸå­æ€§ï¼‰ã€Cï¼ˆä¸€è‡´æ€§ï¼‰ã€I(éš”ç¦»æ€§)ã€Dï¼ˆæŒä¹…æ€§ï¼‰ç­‰å››å¤§ç‰¹æ€§ã€‚é€šä¿—æ¥è®²å°±æ˜¯ä¸€æ¬¡æ€§æŠŠæ‰€æœ‰äº‹æƒ…æ‰“åŒ…åšå®Œï¼Œå®ƒæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ã€‚è¯´åˆ°åˆ†å¸ƒå¼è‚¯å®šè¦æåˆ°å¸ƒé²å°”å®šç†ï¼ˆCPA å®šç†ï¼‰ï¼Œå…·æœ‰ C (ä¸€è‡´æ€§)ã€A ( å¯ç”¨æ€§)ã€P (åˆ†åŒºå®¹é”™æ€§)çš„ç‰¹æ€§ã€‚ ç†è§£äº†æ¦‚å¿µä¹‹åæ‰èƒ½æå‡ºæ›´å¥½çš„è§£å†³æ‰‹æ®µï¼Œå› ä¸º CPA ä¸­ç†è®ºä¸Šæ²¡æœ‰ç½‘ç»œå»¶è¿Ÿï¼Œè€Œå®é™…ç°å®é‡Œæ˜¯æœ‰çš„ï¼Œæ‰€ä»¥åœ¨ CPA å®šç†ä¸ŠåŠ ä¸€ä¸ª BASEï¼Œå³ Basically Available(åŸºæœ¬å¯ç”¨)ã€Soft state(è½¯çŠ¶æ€)å’Œ Eventually consistent (æœ€ç»ˆä¸€è‡´æ€§)ï¼Œå¯ä»¥ç†è§£æ˜¯å¯¹ CAP ä¸­ AP çš„ä¸€","date":"2020-09-11","objectID":"/posts/2020/09/11/the-evolution-and-practice-of-tenclass-infrastructure/:0:3","tags":["tech","cloud native"],"title":"è”æå¾®è¯¾åŸºç¡€æ¶æ„çš„æ¼”è¿›ä¸å®è·µ","uri":"/posts/2020/09/11/the-evolution-and-practice-of-tenclass-infrastructure/"},{"categories":["Tech"],"content":"å¦‚ä½•ç¡®å®šæ¶æ„æ–¹å‘ æ¶æ„çš„æ–¹å‘å§‹ç»ˆæ˜¯å›´ç»•éœ€ä¸éœ€è¦ã€æ–¹ä¸æ–¹ä¾¿ã€ç¨³ä¸ç¨³å®šã€é€‚ä¸é€‚åˆç­‰å±•å¼€çš„ã€‚å•ä½“æ¶æ„ä¹Ÿä¸ä¸€å®šä¸é€‚åˆï¼Œä¸»è¦çœ‹ä¸šåŠ¡ã€æˆæœ¬ã€æ•ˆç‡æ˜¯å¦éœ€è¦ï¼Œå¦‚éœ€è¦åˆ™æ˜¯å¯ä»¥ä¿ç•™çš„ï¼Œæˆ–æ˜¯å½“è¾¾åˆ°äº†ä¸€å®šè§„æ¨¡æœ‰éœ€æ±‚æ—¶å†å»è€ƒè™‘ã€‚åœ¨è€ƒè™‘å¦‚ä½•è§„åˆ’æ¶æ„æ—¶ï¼Œå¯ä»¥ä»ç ”å‘æ•ˆç‡ã€æ‰©å±•æ€§ç­‰æ–¹é¢è€ƒè™‘æ˜¯å¦æ›´æ–¹ä¾¿ï¼Œå½“ç„¶æœ€å…³é”®çš„æ˜¯ä¿æŒç¨³å®šæ€§ã€‚ å¾®æœåŠ¡çš„äº”å¤§åŸåˆ™ ä¸è¦æ„å»ºå¾®æœåŠ¡ï¼Œå³ä¸è¦ä¸ºäº†å¾®æœåŠ¡è€Œå¾®æœåŠ¡ï¼Œè§†å®é™…æƒ…å†µè€Œå®š ä¸è¦åœ¨æ²¡æœ‰ DevOps æˆ–è€…äº‘æœåŠ¡çš„æƒ…å†µä¸‹è¿›è¡Œå¾®æœåŠ¡ï¼Œè¦é¡ºåŠ¿è€Œä¸ºï¼Œå€ŸåŠ›æ‰“åŠ› ä¸è¦é€šè¿‡ä½¿å®ƒä»¬å˜å¾—å¤ªå°æ¥åˆ¶é€ å¤ªå¤šçš„å¾®æœåŠ¡ ä¸è¦æŠŠå°†å¾®æœåŠ¡è½¬å˜ä¸º SOA ä¸è¦å°è¯•æˆä¸º Netflixï¼Œä¸éœ€è¦ä»€ä¹ˆéƒ½ä»å¤´å¼€å§‹ æ¶æ„çš„è¯„ä»·æ–¹æ³• æ€§èƒ½æµ‹è¯•ï¼Œæ¯”å¦‚ç½‘ç»œè€—æ—¶ å‹åŠ›æµ‹è¯•ï¼Œæ£€æµ‹æ¶æ„æ¼æ´å’Œéœ€æ”¹è¿›çš„ å®šæœŸæ¼”ç»ƒï¼Œå®šæœŸæ£€æµ‹ å›¢é˜Ÿã€ç”¨æˆ·æ˜¯å¦æ»¡æ„ï¼Œè¦æ ¹æ®åé¦ˆä¸æ–­çš„æ”¹è¿› ä»ä¸€å¹´å‰çš„äº‹æ•…é¢‘å‘åˆ°ä¸­é—´ä¸€æ®µæ—¶é—´çš„è¯¯æŠ¥ï¼Œè¿™ä¸ªè¿‡ç¨‹æˆ‘ä»¬ä¹Ÿåšäº†å¾ˆå¤šæ”¹è¿›ï¼Œå› ä¸ºæ¯›åˆºä¼šç›´æ¥å½±å“æˆ‘ä»¬çš„åˆ¤æ–­ã€‚è¿˜æœ‰äº›æ˜¯ç¬¬ä¸‰æ–¹å¹³å°äº‹æ•…ï¼Œé’ˆå¯¹ç¬¬ä¸‰æ–¹çš„é—®é¢˜é¦–å…ˆæ˜¯è¦æ²Ÿé€šè¿«ä½¿å¯¹æ–¹å»æ”¹è¿›ï¼Œå†è€…è‡ªå·±ä¹Ÿåšå¥½ä¸€äº›ç¾å¤‡æ–¹æ¡ˆï¼Œæ¯”å¦‚é€‰æ‹©æ›´å¤šçš„åˆä½œå•†ã€‚ä»Šå¹´æˆ‘ä»¬æ­¥å…¥å¹³ç¨³å¢é•¿æœŸï¼ŒåŸºæœ¬ä¸Šå°±æ²¡æœ‰æ¯›åˆºäº†ã€‚ ä»¥ä¸Šæ˜¯ç‹è¯šå¼ºåœ¨åˆæ‹äº‘ Open Talk å…¬å¼€è¯¾ä¸Šçš„ä¸»è¦å†…å®¹åˆ†äº«ï¼Œè§†é¢‘è§‚çœ‹ã€PPT ä¸‹è½½è¯·ç‚¹å‡»è¿™é‡Œã€‚ ","date":"2020-09-11","objectID":"/posts/2020/09/11/the-evolution-and-practice-of-tenclass-infrastructure/:0:4","tags":["tech","cloud native"],"title":"è”æå¾®è¯¾åŸºç¡€æ¶æ„çš„æ¼”è¿›ä¸å®è·µ","uri":"/posts/2020/09/11/the-evolution-and-practice-of-tenclass-infrastructure/"}]