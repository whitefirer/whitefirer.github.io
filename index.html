<!DOCTYPE html>
<html lang="zh-CN">
    <head>
	<meta name="generator" content="Hugo 0.104.0" />
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>whitefirer[PG]</title><meta name="Description" content="Welcome to the blog of whitefirer."><meta property="og:title" content="whitefirer[PG]" />
<meta property="og:description" content="Welcome to the blog of whitefirer." />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://whitefirer.org/" /><meta property="og:site_name" content="whitefirer[PG]" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="whitefirer[PG]"/>
<meta name="twitter:description" content="Welcome to the blog of whitefirer."/>
<meta name="application-name" content="whitefirer[PG]">
<meta name="apple-mobile-web-app-title" content="whitefirer[PG]"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://whitefirer.org/" /><link rel="alternate" href="/index.xml" type="application/rss+xml" title="whitefirer[PG]">
    <link rel="feed" href="/index.xml" type="application/rss+xml" title="whitefirer[PG]"><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "WebSite",
        "url": "https:\/\/whitefirer.org\/","inLanguage": "zh-CN","author": {
                "@type": "Person",
                "name": "whitefirer"
            },"description": "Welcome to the blog of whitefirer.","license": "2022©️whitefirer","name": "whitefirer[PG]"
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="whitefirer[PG]">whitefirer[PG]</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><a class="menu-item" href="/about/"> 关于 </a><a class="menu-item" href="https://github.com/whitefirer" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i>  </a><a class="menu-item" href="/index.xml" title="Rss"><i class='fa fa-rss fa-fw' aria-hidden='true'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a><a href="javascript:void(0);" class="menu-item language" title="选择语言">
                    <i class="fa fa-globe" aria-hidden="true"></i>                      
                    <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/" selected>简体中文</option><option value="/en/">English</option></select>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="whitefirer[PG]">whitefirer[PG]</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a class="menu-item" href="/about/" title="">关于</a><a class="menu-item" href="https://github.com/whitefirer" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i></a><a class="menu-item" href="/index.xml" title="Rss"><i class='fa fa-rss fa-fw' aria-hidden='true'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a><a href="javascript:void(0);" class="menu-item" title="选择语言">
                    <i class="fa fa-globe fa-fw" aria-hidden="true"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/" selected>简体中文</option><option value="/en/">English</option></select>
                </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="page home" data-home="posts"><div class="home-profile"><div class="home-avatar"><a href="/posts/" title="文章"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://avatars.githubusercontent.com/u/12084604?v=4"
        data-srcset="https://avatars.githubusercontent.com/u/12084604?v=4, https://avatars.githubusercontent.com/u/12084604?v=4 1.5x, https://avatars.githubusercontent.com/u/12084604?v=4 2x"
        data-sizes="auto"
        alt="https://avatars.githubusercontent.com/u/12084604?v=4"
        title="https://avatars.githubusercontent.com/u/12084604?v=4" /></a></div><h1 class="home-title">whitefirer</h1><div class="home-subtitle"><div id="id-1" class="typeit"></div></div><div class="links"><a href="https://github.com/whitefirer" title="GitHub" target="_blank" rel="noopener noreffer me"><i class="fab fa-github fa-fw" aria-hidden="true"></i></a><a href="https://medium.com/@whitefirer" title="Medium" target="_blank" rel="noopener noreffer me"><i class="fab fa-medium fa-fw" aria-hidden="true"></i></a><a href="https://www.zhihu.com/people/whitefirer" title="知乎" target="_blank" rel="noopener noreffer me"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/zhihu.svg" aria-hidden="true"></i></a><a href="https://space.bilibili.com/whitefirer" title="bilibili" target="_blank" rel="noopener noreffer me"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/bilibili.svg" aria-hidden="true"></i></a><a href="mailto:whitefirer@gmail.com" title="Email" rel="me"><i class="far fa-envelope fa-fw" aria-hidden="true"></i></a><a href="/index.xml" title="RSS" target="_blank" rel="noopener noreffer me"><i class="fas fa-rss fa-fw" aria-hidden="true"></i></a></div><html>

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://unpkg.com/xterm@4.18.0/css/xterm.css" />
    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js"
        integrity="sha256-/SIrNqv8h6QGKDuNoLGA4iret+kyesCkHGzVUUV0shc=" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/xterm@4.18.0/lib/xterm.js"></script>
    <script src="https://unpkg.com/xterm-addon-webgl@0.12.0-beta.15/lib/xterm-addon-webgl.js"></script>
    <script>
        $(function () {
            
            var baseTheme = {
                foreground: '#F8F8F8',
                background: '#2D2E2C',
                selection: '#5DA5D533',
                black: '#1E1E1D',
                brightBlack: '#262625',
                red: '#CE5C5C',
                brightRed: '#FF7272',
                green: '#5BCC5B',
                brightGreen: '#72FF72',
                yellow: '#CCCC5B',
                brightYellow: '#FFFF72',
                blue: '#5D5DD3',
                brightBlue: '#7279FF',
                magenta: '#BC5ED1',
                brightMagenta: '#E572FF',
                cyan: '#5DA5D5',
                brightCyan: '#72F0FF',
                white: '#F8F8F8',
                brightWhite: '#FFFFFF'
            };
            
            var otherTheme = {
                foreground: '#eff0eb',
                background: '#282a36',
                selection: '#97979b33',
                black: '#282a36',
                brightBlack: '#686868',
                red: '#ff5c57',
                brightRed: '#ff5c57',
                green: '#5af78e',
                brightGreen: '#5af78e',
                yellow: '#f3f99d',
                brightYellow: '#f3f99d',
                blue: '#57c7ff',
                brightBlue: '#57c7ff',
                magenta: '#ff6ac1',
                brightMagenta: '#ff6ac1',
                cyan: '#9aedfe',
                brightCyan: '#9aedfe',
                white: '#f1f1f0',
                brightWhite: '#eff0eb'
            };

            const ESC = '\u001b';
            const CTRL_C = '\u0003';
            const ENTER = '\r';
            const DEL = '\u007F';
            const VK_UP = '\x1b[A';
            const VK_DOWN = '\x1b[B';
            const VK_RIGHT = '\x1b[C';
            const VK_LEFT = '\x1b[D';


            var isBaseTheme = true;
            var isGameStart = false;
            var gameName = "";
            var gameArgs = [];
            var autoFlag = false;
            var changed = false;
            var gameKey = null;
            var consoleKey = null;
            var matrixDropInfoList = [];
            var matrixTheme = "green";
            var matrixDirection = "DOWN";
            var matrixFlag = 1;
            var matrixCols = 24;
            var matrixRows = 80;
            var streamString = "";
            var cmdX = 0;
            var cmdY = 0;

            var term = new window.Terminal({
                fontFamily: '"Cascadia Code", Menlo, monospace',
                theme: baseTheme,
                cursorBlink: true
            });
            term.open(document.querySelector('.demo .inner'));

            var isWebglEnabled = false;
            try {
                const webgl = new window.WebglAddon.WebglAddon();
                term.loadAddon(webgl);
                isWebglEnabled = true;
            } catch (e) {
                console.warn('WebGL addon threw an exception during load', e);
            }

            
            document.querySelector('.xterm').addEventListener('wheel', e => {
                if (term.buffer.active.baseY > 0) {
                    e.preventDefault();
                }
            });

            function runFakeTerminal() {
                if (term._initialized) {
                    return;
                }

                term._initialized = true;

                term.prompt = () => {
                    term.write('\x1b[01;32m➜ \x1b[0m');
                };

                
                initConsole();
                

                setTimeout(() => {
                    if (consoleKey === null) {
                        setTimeout(function () {
                            term.write('c');
                        }, 100)
                        setTimeout(function () {
                            term.write('h');
                        }, 200)
                        setTimeout(function () {
                            term.write('a');
                        }, 300)
                        setTimeout(function () {
                            term.write('r');
                        }, 400)
                        setTimeout(function () {
                            term.write('a');
                        }, 500)
                        setTimeout(function () {
                            term.write('i');
                        }, 600)
                        setTimeout(function () {
                            term.write('n');
                        }, 700)
                        setTimeout(function () {
                            startGame("charain");
                            autoFlag = true;
                        }, 800)
                    }
                }, 600000)

                term.onData(e => {
                    consoleKey = e;
                    if (isGameStart) {
                        onGameData(e);
                        return
                    }
                    switch (e) {
                        case ESC: 
                            term.prompt()
                            break;
                        case CTRL_C: 
                            term.write('^C\n\r');
                            term.prompt()
                            break;
                        case ENTER: 
                            runCommand(term, command);
                            command = '';
                            streamString = '';
                            break;
                        case DEL: 
                            
                            if (term._core.buffer.x > 2) {
                                term.write('\b \b');
                                if (command.length > 0) {
                                    command = command.substr(0, command.length - 1);
                                }
                            }
                            break;
                        default: 
                            if (e >= String.fromCharCode(0x20) && e <= String.fromCharCode(0x7E) || e >= '\u00a0') {
                                command += e;
                                term.write(e);
                            }
                    }
                });

                
                term.registerLinkProvider({
                    provideLinks(bufferLineNumber, callback) {
                        switch (bufferLineNumber) {
                            case 2:
                                callback([
                                    {
                                        text: 'Blog',
                                        range: { start: { x: 28, y: 2 }, end: { x: 31, y: 2 } },
                                        activate() {
                                            window.open('https://whitefirer.org', '_blank');
                                        }
                                    },
                                    {
                                        text: 'GitHub',
                                        range: { start: { x: 34, y: 2 }, end: { x: 39, y: 2 } },
                                        activate() {
                                            window.open('https://github.com/whitefirer', '_blank');
                                        }
                                    },
                                ]);
                                return;
                        }
                        callback(undefined);
                    }
                });
            }

            var command = '';
            var commands = {
                help: {
                    f: (args, final) => {
                        if (args.length == 1) {
                            let cmd = commands[args[0]];
                            streamString += [
                                cmd ? cmd.description : "No thie command",
                                '',
                                cmd ? cmd.help : "",
                            ].join('\n\r')
                        } else {
                            streamString += [
                                'Welcome to console-box! Try some of the commands below.',
                                '',
                                ...Object.keys(commands).map(e => `  ${e.padEnd(10)} ${commands[e].description}`)
                            ].join('\n\r')
                        }
                        if (final) {
                            term.writeln(streamString);
                        }
                    },
                    description: 'Prints this help message',
                },
                ls: {
                    f: (args, final) => {
                        streamString += ['a', 'bunch', 'of', 'fake', 'files'].join('\n\r');
                        if (final) {
                            term.writeln(streamString);
                        }
                    },
                    description: 'Prints a fake directory structure'
                },
                echo: {
                    f: (args, final) => {
                        streamString += args.join(' ').replaceAll('\"', '')
                        if (final) {
                            term.writeln(streamString);
                        }
                    },
                    description: 'Prints a fake directory structure'
                },
                lolcat: {
                    f: (args, final) => {
                        if (args.includes('--help') == false && args.includes('-h') == false && args.length > 0 && streamString.length == 0) {
                            streamString = args.join(' ').replaceAll('\"', '');
                            if (final) {
                                term.writeln(streamString);
                                term.prompt(term);
                            }
                        } else if (final) {
                            var curY = term._buffer._normal.cursorY + term._buffer._normal.baseY + 1;
                            lines = streamString.split('\n');
                            if (args.includes('--help') || args.includes('-h')) {
                                lines.push(commands.lolcat.help);
                            }
                            for (let index = 0; index < lines.length; index++) {
                                let line = lines[index];
                                term.writeln(line);
                            }
                            var seed = Math.floor(Math.random() * 8196);
                            setTimeout(function (args) {
                                for (let y = curY; y < term._buffer._normal.cursorY + term._buffer._normal.baseY; y++) {
                                    for (let i = 0; i < term.cols; i++) {
                                        setStyle(i, y, 0x3000000 | getRainbowColor(0.3, seed + y - curY + i / 8));
                                    }
                                }
                            }, 0);
                            term.refresh(0, term.rows - 1);
                        }

                    },
                    description: 'Rainbow color text',
                    help: [
                        'Usage: lolcat [STRING]...',
                        '',
                        'lolcat is a cli tool to render text with rainbow color',
                        '',
                        'Examples:',
                        '  lolcat "something"\t Show rainbow color text',
                        '  help |lolcat "\t Show rainbow color text for help',
                    ].join('\n\r')
                },
                clear: {
                    f: (args, final) => {
                        streamString = "";
                        if (final) {
                            term.reset();
                        }
                    },
                    description: 'Clear the screen'
                },
                charain: {
                    f: (args, final) => {
                        if (args.includes('--help') || args.includes('-h')) {
                            term.writeln(commands.charain.help);
                            return;
                        }
                        startGame('charain', args);
                    },
                    description: 'Start charain game',
                    help: [
                        'Usage: charain [OPTION]...',
                        '',
                        'Matrix is a game that just for fun. You can start it with theme option, and also you can play it with keys.',
                        '',
                        'Examples:',
                        '  charain\t Show charain game',
                        '',
                        'Keys:',
                        '  Q\tQuit the game',
                        '  SPACE\tRestart the game',
                        '  ENTER\tRandom the game\'s theme',
                        '  ↑↓←→\tControl the Direction, also use [W, S, A, D] keys',
                    ].join('\n\r')

                },
                matrix: {
                    f: (args, final) => {
                        if (args.includes('--help') || args.includes('-h')) {
                            term.writeln(commands.matrix.help);
                            return;
                        }
                        startGame('matrix', args);
                    },
                    description: 'Start matrix game',
                    help: [
                        'Usage: matrix [OPTION]...',
                        '',
                        'Matrix is a game that just for fun. You can start it with theme option, and also you can play it with keys.',
                        '  --theme=<s>\tThemes: green, blue, red, white, black, rainbow, color, random',
                        '',
                        'Examples:',
                        '  matrix --theme=rainbow\t Show rainbow color matrix game',
                        '',
                        'Keys:',
                        '  Q\tQuit the game',
                        '  SPACE\tRestart the game',
                        '  ENTER\tRandom the game\'s theme',
                        '  ↑↓←→\tControl the Direction, also use [W, S, A, D] keys',
                    ].join('\n\r')
                },
                loadtest: {
                    f: (args, final) => {
                        let testData = [];
                        let byteCount = 0;
                        for (let i = 0; i < 50; i++) {
                            let count = 1 + Math.floor(Math.random() * 79);
                            byteCount += count + 2;
                            let data = new Uint8Array(count + 2);
                            data[0] = 0x0A; 
                            for (let i = 1; i < count + 1; i++) {
                                data[i] = 0x61 + Math.floor(Math.random() * (0x7A - 0x61));
                            }
                            
                            
                            data[data.length - 1] = 0x0D; 
                            testData.push(data);
                        }
                        let start = performance.now();
                        for (let i = 0; i < 1024; i++) {
                            for (const d of testData) {
                                term.write(d);
                            }
                        }
                        
                        term.write('', () => {
                            let time = Math.round(performance.now() - start);
                            let mbs = ((byteCount / 1024) * (1 / (time / 1000))).toFixed(2);
                            term.write(`\n\r\nWrote ${byteCount}kB in ${time}ms (${mbs}MB/s) using the ${isWebglEnabled ? 'webgl' : 'canvas'} renderer`);
                            term.prompt();
                        });
                    },
                    description: 'Simulate a lot of data coming from a process'
                }
            };

            function runCommand(term, text) {
                cmds = text.trim().split('|')
                if (cmds.length > 0) {
                    term.writeln('');
                    cmdX = term._buffer._normal.cursorX;
                    cmdY = term._buffer._normal.cursorY;

                    for (let i = 0; i < cmds.length; i++) {
                        let cmd = cmds[i]
                        const fullArgs = cmd.trim().split(' ')
                        const command = fullArgs[0];
                        const args = fullArgs.slice(1, fullArgs.length);

                        if (command.length > 0) {
                            if (command in commands) {
                                commands[command].f(args, cmds.length == (i + 1));
                                continue;
                            }
                            term.writeln(`${command}: command not found`);
                        }
                    }
                }
                streamString = "";
                term.prompt();
            }

            function initConsole() {
                term.reset();
                term.writeln([
                    '         Welcome! whitefirer.org is a blog for technical exchange',
                    '                           \x1b[4m\x1b[3m\x1b[1mBlog\x1b[0m, \x1b[4m\x1b[3m\x1b[1mGithub\x1b[0m and \x1b[3mGame\x1b[0m!',
                    '',
                    ' ┌ \x1b[1mAbout\x1b[0m ─────────────────────────────────────────────────────────────────────┐',
                    ' │                                                                            │',
                    ' │  \x1b[31;1mProfile                                \x1b[32mTechnology\x1b[0m                         │',
                    ' │   Name: 王诚强 (mortywang)               Cloud Native                      │',
                    ' │   Github: whitefirer                     \x1b[3mDistributed System\x1b[0m                │',
                    ' │                                                                            │',
                    ' │  \x1b[33;1mContact                                \x1b[34mLanguages\x1b[0m                          │',
                    ' │   whitefirer@gmail.com                   Go Python C C++ TypeScript HCL    │',
                    ' │                                                                            │',
                    ' │  \x1b[35;1mIntroduction                           \x1b[36mAnd much more...\x1b[0m                   │',
                    ' │   Hi, I\'m a developer that                                                 │',
                    ' │   working for tencent music                                                │',
                    ' │   If you also like technology                                              │',
                    ' │   please conact with me.                                                   │',
                    ' └────────────────────────────────────────────────────────────────────────────┘',
                    ''
                ].join('\n\r'));

                term.writeln('Below is a simple emulated backend, try running `charain`, `matrix` or `help`.');
                term.prompt();
            }

            function initGameConsole() {
                initConsole();
            }

            $(document).ready(function () {
                $("#_selectgame").change(function (e) {
                    startGame(e.target.value, ['--auto=true']); 
                });
            });

            function startGame(name, args) {
                gameName = name;
                gameArgs = args;
                var pramas = {};
                gameArgs.forEach(function (key) {
                    var kv = key.split('=');
                    if (kv.length == 2) {
                        pramas[kv[0].replace("--", "")] = kv[1];
                    }

                });

                isGameStart = true;
                term.write('\x1b[?25l')
                switch (name) {
                    case 'charain':
                        initGameConsole();
                        autoFlag = pramas.auto ? Boolean(pramas.auto) : false;
                        gameKey = VK_DOWN;
                        break;
                    case 'matrix':
                        matrixDirection = "DOWN";
                        initGameConsole();
                        matrixDropInfoList = [];
                        matrixTheme = pramas.theme ? pramas.theme : "green";
                        break;
                }
            }

            class DropInfo {
                constructor(ypos, style) {
                    this.ypos = ypos;
                    this.style = style;
                }
            }

            function getRainbowColor(freq, i) {
                const red = Math.round(Math.sin(freq * i + 0) * 127 + 128);
                const green = Math.round(Math.sin(freq * i + 2 * Math.PI / 3) * 127 + 128);
                const blue = Math.round(Math.sin(freq * i + 4 * Math.PI / 3) * 127 + 128);

                return (red << 16) | (green << 8) | (blue << 0)
            }

            function getMatrixStyleList(theme, fix) {
                var freq = 0.06;
                var styleList = [];
                switch (theme) {
                    case "green":
                    case "":
                        styleList = [0xbffffff, 0xb00ff00, 0x300ff00, 0x300dd00, 0x300cc00, 0x300aa00, 0x3008800, 0x3006600, 0x3004400, 0x3224422, 0x3002200, 0x200ff00, 0x9000000, 0] 
                        break;
                    case "blue":
                        styleList = [0xbffffff, 0xb0000ff, 0x30000ff, 0x30000dd, 0x30000cc, 0x30000aa, 0x3000088, 0x3000066, 0x3000044, 0x3222244, 0x3004400, 0x2004400, 0x9000000, 0] 
                        break;
                    case "red":
                        styleList = [0xbffaaaa, 0xbff2222, 0x3ff2222, 0x3dd2222, 0x3cc2222, 0x3aa2222, 0x3882222, 0x3662222, 0x3442222, 0x3442222, 0x3220000, 0x2ff0000, 0x9000000, 0] 
                        break;
                    case "black":
                        styleList = [0xb000000, 0x3000000, 0x3020202, 0x3040404, 0x3060606, 0x3080808, 0x30a0a0a, 0x30f0f0f, 0x3222222, 0x2111100, 0x9000000, 0, 0, 0] 
                        break;
                    case "white":
                        styleList = [0xbffffff, 0x3ffffff, 0x3dddddd, 0x3cccccc, 0x3aaaaaa, 0x3888888, 0x3666666, 0x3444444, 0x3222222, 0x2111100, 0x9000000, 0, 0, 0] 
                        break;
                    case "yellow":
                        styleList = [0xbffffff, 0xbffff00, 0x3ffff00, 0x3cccc00, 0x3aaaa00, 0x3888800, 0x3666600, 0x3444400, 0x3444422, 0x3222200, 0x200ff00, 0x9000000, 0, 0] 
                        break;
                    case "color":
                        freq = 0.3;
                    case "rainbow":
                    default:
                        var styleList = [];
                        for (let i = 0; i < 13; i++) {
                            styleList.push(0x3000000 | getRainbowColor(freq, i + fix));
                        }

                        styleList.push(0);
                        break;
                }

                return styleList;
            }

            function initMatrix() {
                matrixDropInfoList = [];
                switch (matrixDirection) {
                    case "DOWN":
                        for (let i = 0; i < term.cols; i++) {
                            matrixDropInfoList.push(new DropInfo(0, 0));
                        }
                        matrixCols = term.cols;
                        matrixRows = term.rows;
                        matrixFlag = 1;
                        break;
                    case "UP":
                        for (let i = 0; i < term.cols; i++) {
                            matrixDropInfoList.push(new DropInfo(term.rows, 0));
                        }
                        matrixCols = term.cols;
                        matrixRows = term.rows;
                        matrixFlag = -1;
                        break;
                    case "RIGHT":
                        for (let i = 0; i < term.rows; i++) {
                            matrixDropInfoList.push(new DropInfo(0, 0));
                        }
                        matrixCols = term.rows;
                        matrixRows = term.cols;
                        matrixFlag = 1;
                        break;
                    case "LEFT":
                        for (let i = 0; i < term.rows; i++) {
                            matrixDropInfoList.push(new DropInfo(term.cols, 0));
                        }
                        matrixCols = term.rows;
                        matrixRows = term.cols;
                        matrixFlag = -1;
                        break;
                }
            }

            function matrix() {
                if (!isGameStart || gameName != "matrix") {
                    return;
                }

                const matrixThemes = ["green", "black", "white", "yellow", "rainbow", "color", "red", "blue"]

                switch (gameKey) {
                    case "q":
                        matrixDirection = "DOWN";
                        break;
                    case ' ':
                        initGameConsole();
                        initMatrix();
                        gameKey = null;
                        break;
                    case VK_DOWN:
                    case 's':
                        matrixDirection = "DOWN";
                        initGameConsole();
                        initMatrix();
                        gameKey = null;
                        break;
                    case VK_UP:
                    case 'w':
                        matrixDirection = "UP";
                        initGameConsole();
                        initMatrix();
                        gameKey = null;
                        break;
                    case VK_RIGHT:
                    case 'd':
                        matrixDirection = "RIGHT";
                        initGameConsole();
                        initMatrix();
                        gameKey = null;
                        break;
                    case 'a':
                    case VK_LEFT:
                        matrixDirection = "LEFT";
                        initGameConsole();
                        initMatrix();
                        gameKey = null;
                        break;
                    case ENTER:
                        matrixTheme = matrixThemes[Math.round((Math.random() + 1) * (matrixThemes.length)) % matrixThemes.length]
                        gameKey = null;
                        break;
                }

                var delayFix = 0;
                switch (matrixTheme) {
                    case "random":
                        matrixTheme = matrixThemes[Math.round((Math.random() + 1) * (matrixThemes.length)) % matrixThemes.length]
                        break;
                }
                var styleList = getMatrixStyleList(matrixTheme, delayFix)

                if (matrixDropInfoList.length == 0) {
                    initMatrix();
                }
                matrixDropInfoList.forEach((dropInfo, x) => {
                    var y = dropInfo.ypos;

                    switch (matrixTheme) {
                        case "rainbow":
                        case "color":
                            delayFix = Math.round(Date.now() / 200);
                            styleList = getMatrixStyleList(matrixTheme, delayFix + x);
                            break;
                    }

                    var randomSelect = Math.random() * 500;
                    if (y > (matrixRows + styleList.length + randomSelect) || y < -styleList.length - randomSelect) {
                        dropInfo.ypos = matrixFlag == -1 ? matrixRows - 1 : 0;
                    }
                    else {
                        dropInfo.ypos = y + 1 * matrixFlag;
                    }

                    if (x < matrixCols && y < matrixRows && x >= 0 && y >= 0) {
                        var char = [Math.round(Math.random() * 94) + 33, styleList[dropInfo.style], 0]

                        if (matrixDirection == "LEFT" || matrixDirection == "RIGHT") {
                            setChar(y, x, char, undefined);
                        } else {
                            setChar(x, y, char, undefined);
                        }
                    }

                    if (x < matrixCols && y < matrixRows + styleList.length && y > -styleList.length) {
                        styleList.forEach((style, ind) => {
                            var tmp_y = y - ind * matrixFlag;
                            if (tmp_y < 0 || tmp_y >= matrixRows) {
                                return;
                            }

                            if (style == 0) {
                                if (matrixDirection == "LEFT" || matrixDirection == "RIGHT") {
                                    setChar(tmp_y, x, [32, 0, 0], undefined);
                                } else {
                                    setChar(x, tmp_y, [32, 0, 0], undefined);
                                }
                            } else {
                                if (matrixDirection == "LEFT" || matrixDirection == "RIGHT") {
                                    setStyle(tmp_y, x, style);
                                } else {
                                    setStyle(x, tmp_y, style);
                                }
                            }
                        });
                    }
                });

                term.refresh(0, term.rows - 1);
            }

            function onGameData(e) {
                switch (e) {
                    case ESC: 
                    case 'q':
                        isGameStart = false;
                        gameKey = null;
                        term.write('\x1b[!p')
                        gameName = "";
                        initConsole();
                        break;
                    default: 
                        gameKey = e;
                        break;
                }
            }

            function getChar(col, row) {
                return [
                    term._buffer._core.buffer.lines._array[row]._data[3 * col],
                    term._buffer._core.buffer.lines._array[row]._data[3 * col + 1],
                    term._buffer._core.buffer.lines._array[row]._data[3 * col + 2]
                ]
            }

            function getCombinedChar(col, row) {
                let lines = term._buffer._core.buffer.lines._array[row];
                if (lines === undefined) {
                    return undefined;
                }
                return lines._combined[col];
            }


            function setChar(col, row, value, combinedChar) {
                if (combinedChar != undefined) {
                    term._buffer._core.buffer.lines._array[row]._combined[col] = combinedChar;
                } else if (term._buffer._core.buffer.lines._array[row]._combined[col]) {
                    delete (term._buffer._core.buffer.lines._array[row]._combined[col]);
                }

                term._buffer._core.buffer.lines._array[row]._data[3 * col] = value[0];
                term._buffer._core.buffer.lines._array[row]._data[3 * col + 1] = value[1];
                term._buffer._core.buffer.lines._array[row]._data[3 * col + 2] = value[2];
            }

            function setStyle(col, row, style) {
                term._buffer._core.buffer.lines._array[row]._data[3 * col + 1] = style;
            }

            function setNormalChar(col, row, value, combinedChar) {
                if (combinedChar != undefined) {
                    term._buffer._normal._buffer.lines._array[row]._combined[col] = combinedChar;
                } else if (term._buffer._normal._buffer.lines._array[row]._combined[col]) {
                    delete (term._buffer._normal._buffer.lines._array[row]._combined[col]);
                }

                term._buffer._normal._buffer.lines._array[row]._data[3 * col] = value[0];
                term._buffer._normal._buffer.lines._array[row]._data[3 * col + 1] = value[1];
                term._buffer._normal._buffer.lines._array[row]._data[3 * col + 2] = value[2];
            }

            function setNormalStyle(col, row, style) {
                term._buffer._normal._buffer.lines._array[row]._data[3 * col + 1] = style;
            }

            function isEmptyChar(col, row) {
                let line = term.buffer.active.getLine(row);
                if (line == undefined) {
                    return false;
                }
                let cell = line.getCell(col)
                if (cell == undefined) {
                    return false;
                }
                return cell.getChars() == ' ' || cell.getChars() == ''
            }

            function charain() {
                if (!isGameStart || gameName != "charain") {
                    return;
                }
                const keys = [VK_LEFT, VK_RIGHT, VK_DOWN, VK_UP];
                if (keys.includes(consoleKey)) {
                    autoFlag = false;
                }

                if (autoFlag && !changed) {
                    let index = Math.round((Math.random() * keys.length));
                    gameKey = keys[index];
                }
                changed = false;

                for (let k = 0; k < term.rows; k++) {
                    let j = term.rows - 1 - k;
                    for (let i = 0; i < term.cols; i++) {
                        let cur_char = getChar(i, j);
                        let cur_combined_char = getCombinedChar(i, j);

                        if (isEmptyChar(i, j)) {
                            continue;
                        }

                        let ax = i;
                        let ay = j;
                        if (gameKey == null) {
                            continue
                        }

                        switch (gameKey) {
                            case ' ':
                                initGameConsole();
                                gameKey = null;
                                autoFlag = false;
                                break;
                            case ENTER:
                                gameKey = null;
                                autoFlag = !autoFlag;
                                break;
                            case VK_UP:
                            case 'w':
                                ay = j - Math.round(Math.random() * 1);
                                break;
                            case VK_LEFT:
                            case 'a':
                                ax = i - Math.round(Math.random() * 1);
                                break;
                            case VK_RIGHT:
                            case 'd':
                                ax = i + Math.round(Math.random() * 1);
                                break;
                            default:
                            case 's':
                                ay = j + Math.round(Math.random() * 1);
                                break;
                        }

                        let next_char = null;
                        let next_combined_char = undefined;
                        if (ax >= 0 && ax < term.cols && ay < term.rows && ay >= 0) {
                            next_char = getChar(ax, ay)
                            next_combined_char = getCombinedChar(ax, ay);
                        }

                        if (next_char != null && isEmptyChar(ax, ay)
                            && (j < term.rows)
                            && (i < term.cols)
                            && (i >= 0)) {
                            setChar(ax, ay, cur_char, cur_combined_char);
                            setChar(i, j, next_char, next_combined_char);

                            changed = true;

                        }
                    }
                }
                if (changed) {
                    term.refresh(0, term.rows - 1);
                }

            }

            setInterval(matrix, 100);
            setInterval(charain, 2);
            runFakeTerminal();
        });

        function addDecoration(term) {
            const marker = term.addMarker(15);
            const decoration = term.registerDecoration({ marker, x: 44 });
            decoration.onRender(element => {
                element.classList.add('link-hint-decoration');
                element.innerText = 'Try clicking italic text';
                
                element.style.height = '';
                element.style.width = '';
            });
        }

    </script>
    <style>
        .xterm-viewport.xterm-viewport {
            scrollbar-width: thin;
        }

        .xterm-viewport::-webkit-scrollbar {
            width: 10px;
        }

        .xterm-viewport::-webkit-scrollbar-track {
            opacity: 0;
        }

        .xterm-viewport::-webkit-scrollbar-thumb {
            min-height: 20px;
            background-color: #ffffff20;
        }

        .link-hint-decoration {
            background-color: #5f5d5d;
            padding: 0.2em 0.5em;
            border-radius: 7px;
            color: white;
            border-top-right-radius: 0px;
            margin-top: 8px;
            font-size: 15px;
        }

        body {
            font-family: "Source Sans Pro", Arial, sans-serif;
            font-size: 17px;
            color: #4b4f5c;
            line-height: 1.42857143;
             
        }

        .demo {
            display: flex;
            justify-content: center;
            margin: 10px 0 20px;
             
        }

        .demo .inner {
            padding: 5px 15px;
            border-radius: 5px;
            background-color: #2D2E2C;
            overflow-x: auto;
        }

        .demo .inner.other-theme {
            background-color: #282a36;
        }

        .container {
            width: 100%;
            padding-right: 5px;
            padding-left: 5px;
            margin-right: auto;
            margin-left: auto;

        }

        kbd {
            display: inline-block !important;
            padding: 3px 5px !important;
            font: 11px ui-monospace, SFMono-Regular, SF Mono, Menlo, Consolas, Liberation Mono, monospace !important;
            line-height: 10px !important;
            color: #24292f !important;
            vertical-align: middle !important;
            background-color: #f6f8fa !important;
            border: solid 1px rgba(175, 184, 193, 0.2) !important;
            border-bottom-color: rgba(175, 184, 193, 0.2) !important;
            border-radius: 6px !important;
            box-shadow: inset 0 -1px 0 rgba(175, 184, 193, 0.2) !important;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="demo">
            <div class="inner"></div>
        </div>
        <p><kbd><select id="_selectgame">
                    <option value="charain" selected>charain</option>
                    <option value="matrix">matrix</option>
                </select></kbd>：Start，<kbd>Q</kbd>：Quit，<kbd>SPACE</kbd>：Reinit，<kbd>ENTER</kbd>：Random，<kbd>↑</kbd><kbd>↓</kbd><kbd>←</kbd><kbd>→</kbd>：Control
            the Direction</p>
    </div>
</body>

</html></div>
<article class="single summary" itemscope itemtype="http://schema.org/Article"><h1 class="single-title" itemprop="name headline">
        <a href="/posts/2022/08/30/polaris2istio/">Polaris2Istio的实现和说明</a>
    </h1><div class="post-meta"><span class="post-author"><a href="https://whitefirer.org" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>whitefirer</a></span>&nbsp;<span class="post-publish">发布于 <time datetime="2022-08-30">2022-08-30</time></span>&nbsp;<span class="post-category">收录于 <a href="/categories/tech/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>技术</a></span></div><div class="content">背景 如融合、扩展Service Mesh文中所述，为了让第三方服务发现的服务能够接入到Istio服务网格当中，我设计开放一个名为Polaris</div><div class="post-footer">
        <a href="/posts/2022/08/30/polaris2istio/">阅读全文</a><div class="post-tags">
                <i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/tech/">技术</a>,&nbsp;<a href="/tags/cloud-native/">云原生</a>,&nbsp;<a href="/tags/service-mesh/">服务网格</a>,&nbsp;<a href="/tags/istio/">istio</a></div></div>
</article><article class="single summary" itemscope itemtype="http://schema.org/Article"><h1 class="single-title" itemprop="name headline">
        <a href="/posts/2022/08/29/extension-and-expansion-of-service-mesh/">融合、扩展Service Mesh</a>
    </h1><div class="post-meta"><span class="post-author"><a href="https://whitefirer.org" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>whitefirer</a></span>&nbsp;<span class="post-publish">发布于 <time datetime="2022-08-29">2022-08-29</time></span>&nbsp;<span class="post-category">收录于 <a href="/categories/tech/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>技术</a></span></div><div class="content">导语 没有最完美的架构，只有最合适的架构。 背景 很多时候服务网格在业务难以落地，往往是因为有历史包袱或者特殊需求，反而没有新设计的项目接入服务网</div><div class="post-footer">
        <a href="/posts/2022/08/29/extension-and-expansion-of-service-mesh/">阅读全文</a><div class="post-tags">
                <i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/tech/">技术</a>,&nbsp;<a href="/tags/cloud-native/">云原生</a>,&nbsp;<a href="/tags/service-mesh/">服务网格</a></div></div>
</article><article class="single summary" itemscope itemtype="http://schema.org/Article"><h1 class="single-title" itemprop="name headline">
        <a href="/posts/2022/08/29/efficient-command-line-tools/">高效终端命令行工具</a>
    </h1><div class="post-meta"><span class="post-author"><a href="https://whitefirer.org" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>whitefirer</a></span>&nbsp;<span class="post-publish">发布于 <time datetime="2022-08-29">2022-08-29</time></span>&nbsp;<span class="post-category">收录于 <a href="/categories/tech/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>技术</a>&nbsp;<a href="/categories/workspace/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>Workspace</a></span></div><div class="content">导语 工欲善其事，必先利其器。 作为技术人员，一个高效的工作环境尤为重要。下面分享下我的终端命令行下的环境和工具配置。 zsh&amp;oh-my-zsh 安装 参考：https:/</div><div class="post-footer">
        <a href="/posts/2022/08/29/efficient-command-line-tools/">阅读全文</a><div class="post-tags">
                <i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/tech/">技术</a>,&nbsp;<a href="/tags/command-line-tools/">命令行工具</a></div></div>
</article><article class="single summary" itemscope itemtype="http://schema.org/Article"><h1 class="single-title" itemprop="name headline">
        <a href="/posts/2022/08/28/hugo-asciinema-player/">如何在Hugo博客中使用终端播放器Asciinema-Player</a>
    </h1><div class="post-meta"><span class="post-author"><a href="https://whitefirer.org" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>whitefirer</a></span>&nbsp;<span class="post-publish">发布于 <time datetime="2022-08-28">2022-08-28</time></span>&nbsp;<span class="post-category">收录于 <a href="/categories/hugo/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>Hugo</a></span></div><div class="content">Asciinema-Player是一款著名的的终端录制播放器，可用于播放asciinema录制的播放文件，经常被用来进行终端操作演示。这里也</div><div class="post-footer">
        <a href="/posts/2022/08/28/hugo-asciinema-player/">阅读全文</a><div class="post-tags">
                <i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/hugo/">hugo</a>,&nbsp;<a href="/tags/tech/">技术</a>,&nbsp;<a href="/tags/asciinema/">asciinema</a></div></div>
</article></div></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.104.0">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/whitefirer/iLoveIt" target="_blank" rel="noopener noreffer" title="iLoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> iLoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://whitefirer.org" target="_blank">whitefirer</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.stemmer.support.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.zh.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/typeit@8.6.0/dist/index.umd.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":50},"data":{"id-1":["Go big or go home","Cloud Native and Architecture Design","人生苦短，何不用python. 星汉灿烂，道阻且长go.","难度即价值所在"]},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":30,"type":"lunr"},"typeit":{"cursorChar":"|","cursorSpeed":1000,"data":{"id-1":["id-1"]},"duration":-1,"speed":100}};</script><script type="text/javascript" src="/js/theme.min.js"></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'UA-28167869-1', { 'anonymize_ip': true });
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=UA-28167869-1" async></script></body>
</html>
